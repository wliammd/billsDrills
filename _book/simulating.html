<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Simulating data | Bill’s Drills Book</title>
  <meta name="description" content="Chapter 9 Simulating data | Bill’s Drills Book" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Simulating data | Bill’s Drills Book" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="https://github.com/wliammd/billsDrills" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Simulating data | Bill’s Drills Book" />
  
  
  

<meta name="author" content="William McDonald" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sampling.html"/>
<link rel="next" href="functions.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Bill's Drills Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Drills: Part of Every Healthy Intellectual Diet</a></li>
<li class="chapter" data-level="2" data-path="bookdownplan.html"><a href="bookdownplan.html"><i class="fa fa-check"></i><b>2</b> <strong>bookdown</strong> Tips for This Document</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bookdownplan.html"><a href="bookdownplan.html#basic-conventions"><i class="fa fa-check"></i><b>2.1</b> Basic conventions</a></li>
<li class="chapter" data-level="2.2" data-path="bookdownplan.html"><a href="bookdownplan.html#rstudio-tip-preview-in-viewer-pane"><i class="fa fa-check"></i><b>2.2</b> RStudio Tip: Preview in Viewer Pane</a></li>
<li class="chapter" data-level="2.3" data-path="bookdownplan.html"><a href="bookdownplan.html#inserting-pictures"><i class="fa fa-check"></i><b>2.3</b> Inserting pictures</a></li>
<li class="chapter" data-level="2.4" data-path="bookdownplan.html"><a href="bookdownplan.html#referencing-other-parts-of-the-document"><i class="fa fa-check"></i><b>2.4</b> Referencing other parts of the document</a></li>
<li class="chapter" data-level="2.5" data-path="bookdownplan.html"><a href="bookdownplan.html#referencing-citations"><i class="fa fa-check"></i><b>2.5</b> Referencing citations:</a></li>
<li class="chapter" data-level="2.6" data-path="bookdownplan.html"><a href="bookdownplan.html#figures."><i class="fa fa-check"></i><b>2.6</b> Figures.</a></li>
<li class="chapter" data-level="2.7" data-path="bookdownplan.html"><a href="bookdownplan.html#working-with-github"><i class="fa fa-check"></i><b>2.7</b> Working with Github</a></li>
<li class="chapter" data-level="2.8" data-path="bookdownplan.html"><a href="bookdownplan.html#working-with-a-lot-of-packages"><i class="fa fa-check"></i><b>2.8</b> Working with a lot of packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="datashape.html"><a href="datashape.html"><i class="fa fa-check"></i><b>3</b> Shape of Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="datashape.html"><a href="datashape.html#making-data-frames"><i class="fa fa-check"></i><b>3.1</b> Making data frames</a></li>
<li class="chapter" data-level="3.2" data-path="datashape.html"><a href="datashape.html#the-humble-table"><i class="fa fa-check"></i><b>3.2</b> The humble table</a></li>
<li class="chapter" data-level="3.3" data-path="datashape.html"><a href="datashape.html#gather-spread-pivoting-in-the-tidyverse"><i class="fa fa-check"></i><b>3.3</b> Gather, spread, pivoting in the tidyverse</a></li>
<li class="chapter" data-level="3.4" data-path="datashape.html"><a href="datashape.html#gathering-steam"><i class="fa fa-check"></i><b>3.4</b> Gathering steam…</a></li>
<li class="chapter" data-level="3.5" data-path="datashape.html"><a href="datashape.html#spread-your-wings"><i class="fa fa-check"></i><b>3.5</b> Spread your wings</a></li>
<li class="chapter" data-level="3.6" data-path="datashape.html"><a href="datashape.html#missing-data-ich-vemisse-dich"><i class="fa fa-check"></i><b>3.6</b> Missing Data: Ich vemisse Dich!</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="datashape.html"><a href="datashape.html#you-completeme"><i class="fa fa-check"></i><b>3.6.1</b> You complete(me)</a></li>
<li class="chapter" data-level="3.6.2" data-path="datashape.html"><a href="datashape.html#filling-in-the-gaps"><i class="fa fa-check"></i><b>3.6.2</b> fill(ing) in the gaps</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="datashape.html"><a href="datashape.html#pivoting-to-something-new"><i class="fa fa-check"></i><b>3.7</b> Pivoting to something new</a></li>
<li class="chapter" data-level="3.8" data-path="datashape.html"><a href="datashape.html#larger-structures"><i class="fa fa-check"></i><b>3.8</b> Larger structures</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="changenames.html"><a href="changenames.html"><i class="fa fa-check"></i><b>4</b> By Any Other Name</a>
<ul>
<li class="chapter" data-level="4.1" data-path="changenames.html"><a href="changenames.html#a-financial-example"><i class="fa fa-check"></i><b>4.1</b> A financial example</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="factorpractice.html"><a href="factorpractice.html"><i class="fa fa-check"></i><b>5</b> Factor Practice</a>
<ul>
<li class="chapter" data-level="5.1" data-path="factorpractice.html"><a href="factorpractice.html#the-basic-structure"><i class="fa fa-check"></i><b>5.1</b> The basic structure</a></li>
<li class="chapter" data-level="5.2" data-path="factorpractice.html"><a href="factorpractice.html#not-all-nominal-data-is-a-factor"><i class="fa fa-check"></i><b>5.2</b> Not all nominal data is a factor</a></li>
<li class="chapter" data-level="5.3" data-path="factorpractice.html"><a href="factorpractice.html#making-variables-into-factors"><i class="fa fa-check"></i><b>5.3</b> Making variables into factors</a></li>
<li class="chapter" data-level="5.4" data-path="factorpractice.html"><a href="factorpractice.html#inspecting-factors"><i class="fa fa-check"></i><b>5.4</b> Inspecting factors</a></li>
<li class="chapter" data-level="5.5" data-path="factorpractice.html"><a href="factorpractice.html#fct_lump"><i class="fa fa-check"></i><b>5.5</b> fct_lump()</a></li>
<li class="chapter" data-level="5.6" data-path="factorpractice.html"><a href="factorpractice.html#fct_infreq-and-fct_rev"><i class="fa fa-check"></i><b>5.6</b> fct_infreq() and fct_rev()</a></li>
<li class="chapter" data-level="5.7" data-path="factorpractice.html"><a href="factorpractice.html#additional-practice"><i class="fa fa-check"></i><b>5.7</b> Additional practice</a></li>
<li class="chapter" data-level="5.8" data-path="factorpractice.html"><a href="factorpractice.html#reordering-factors"><i class="fa fa-check"></i><b>5.8</b> Reordering Factors</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="factorpractice.html"><a href="factorpractice.html#fct_reorder2-another-way-to-improve-legibility"><i class="fa fa-check"></i><b>5.8.1</b> fct_reorder2(): another way to improve legibility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="subset.html"><a href="subset.html"><i class="fa fa-check"></i><b>6</b> Subsetting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="subset.html"><a href="subset.html#subsetting-using-brackets"><i class="fa fa-check"></i><b>6.1</b> Subsetting using brackets</a></li>
<li class="chapter" data-level="6.2" data-path="subset.html"><a href="subset.html#subset-using-brackets-by-omitting-the-rows-and-columns-we-dont-want"><i class="fa fa-check"></i><b>6.2</b> Subset using brackets by omitting the rows and columns we don’t want</a></li>
<li class="chapter" data-level="6.3" data-path="subset.html"><a href="subset.html#subset-using-brackets-in-combination-with-the-which-function-and-the-in-operator"><i class="fa fa-check"></i><b>6.3</b> Subset using brackets in combination with the which() function and the %in% operator</a></li>
<li class="chapter" data-level="6.4" data-path="subset.html"><a href="subset.html#subset-using-the-subset-function"><i class="fa fa-check"></i><b>6.4</b> Subset using the subset() function</a></li>
<li class="chapter" data-level="6.5" data-path="subset.html"><a href="subset.html#subset-using-dyplyrs-filter-and-select"><i class="fa fa-check"></i><b>6.5</b> Subset using dyplyr’s filter() and select()</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dataexploration.html"><a href="dataexploration.html"><i class="fa fa-check"></i><b>7</b> Data Exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dataexploration.html"><a href="dataexploration.html#counting-things.-the-naming-of-parts."><i class="fa fa-check"></i><b>7.1</b> Counting things. The naming of parts.</a></li>
<li class="chapter" data-level="7.2" data-path="dataexploration.html"><a href="dataexploration.html#fct_infreq"><i class="fa fa-check"></i><b>7.2</b> fct_infreq</a></li>
<li class="chapter" data-level="7.3" data-path="dataexploration.html"><a href="dataexploration.html#weight-weight-dont-tell-me"><i class="fa fa-check"></i><b>7.3</b> Weight weight, don’t tell me!</a></li>
<li class="chapter" data-level="7.4" data-path="dataexploration.html"><a href="dataexploration.html#summarize-is-another-very-useful-function"><i class="fa fa-check"></i><b>7.4</b> Summarize is another very useful function:</a></li>
<li class="chapter" data-level="7.5" data-path="dataexploration.html"><a href="dataexploration.html#graphical-displays"><i class="fa fa-check"></i><b>7.5</b> Graphical displays</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="dataexploration.html"><a href="dataexploration.html#joyplots"><i class="fa fa-check"></i><b>7.5.1</b> Joyplots</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="dataexploration.html"><a href="dataexploration.html#relative-versus-absolute-risk"><i class="fa fa-check"></i><b>7.6</b> Relative versus absolute risk</a></li>
<li class="chapter" data-level="7.7" data-path="dataexploration.html"><a href="dataexploration.html#removing-duplicates"><i class="fa fa-check"></i><b>7.7</b> Removing duplicates</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sampling.html"><a href="sampling.html"><i class="fa fa-check"></i><b>8</b> Sampling</a>
<ul>
<li class="chapter" data-level="8.1" data-path="sampling.html"><a href="sampling.html#think-about-throwing-a-bunch-of-dice."><i class="fa fa-check"></i><b>8.1</b> Think about throwing a bunch of dice.</a></li>
<li class="chapter" data-level="8.2" data-path="sampling.html"><a href="sampling.html#a-keen-way-to-divide-up-a-dataset-into-testing-and-training-components."><i class="fa fa-check"></i><b>8.2</b> A keen way to divide up a dataset into testing and training components.</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="simulating.html"><a href="simulating.html"><i class="fa fa-check"></i><b>9</b> Simulating data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="simulating.html"><a href="simulating.html#sample"><i class="fa fa-check"></i><b>9.1</b> Sample()</a></li>
<li class="chapter" data-level="9.2" data-path="simulating.html"><a href="simulating.html#replicate"><i class="fa fa-check"></i><b>9.2</b> replicate()</a></li>
<li class="chapter" data-level="9.3" data-path="simulating.html"><a href="simulating.html#sample-revisited"><i class="fa fa-check"></i><b>9.3</b> sample() revisited</a></li>
<li class="chapter" data-level="9.4" data-path="simulating.html"><a href="simulating.html#generating-fixed-levels--"><i class="fa fa-check"></i><b>9.4</b> generating fixed levels ————————————————-</a></li>
<li class="chapter" data-level="9.5" data-path="simulating.html"><a href="simulating.html#generating-numerical-sequences"><i class="fa fa-check"></i><b>9.5</b> generating numerical sequences</a></li>
<li class="chapter" data-level="9.6" data-path="simulating.html"><a href="simulating.html#seq_along-and-seq_len."><i class="fa fa-check"></i><b>9.6</b> seq_along() and seq_len().</a></li>
<li class="chapter" data-level="9.7" data-path="simulating.html"><a href="simulating.html#generating-random-data-from-a-probability-distribution"><i class="fa fa-check"></i><b>9.7</b> generating random data from a probability distribution</a></li>
<li class="chapter" data-level="9.8" data-path="simulating.html"><a href="simulating.html#normal-distribution"><i class="fa fa-check"></i><b>9.8</b> Normal distribution:</a></li>
<li class="chapter" data-level="9.9" data-path="simulating.html"><a href="simulating.html#binomial-distribution"><i class="fa fa-check"></i><b>9.9</b> Binomial distribution:</a></li>
<li class="chapter" data-level="9.10" data-path="simulating.html"><a href="simulating.html#uniform-distribution"><i class="fa fa-check"></i><b>9.10</b> Uniform distribution</a></li>
<li class="chapter" data-level="9.11" data-path="simulating.html"><a href="simulating.html#sampling-from-multiple-distributions-building-in-a-difference"><i class="fa fa-check"></i><b>9.11</b> Sampling from multiple distributions (building in a “difference”)</a></li>
<li class="chapter" data-level="9.12" data-path="simulating.html"><a href="simulating.html#the-good-stuff-building-in-a-difference-based-on-a-categorical-variable"><i class="fa fa-check"></i><b>9.12</b> The good stuff: building in a difference based on a categorical variable</a></li>
<li class="chapter" data-level="9.13" data-path="simulating.html"><a href="simulating.html#a-demonstration-of-the-central-limit-theorem"><i class="fa fa-check"></i><b>9.13</b> A demonstration of the Central Limit Theorem</a></li>
<li class="chapter" data-level="9.14" data-path="simulating.html"><a href="simulating.html#overlaying-normal-curve-on-histogram"><i class="fa fa-check"></i><b>9.14</b> Overlaying normal curve on histogram</a></li>
<li class="chapter" data-level="9.15" data-path="simulating.html"><a href="simulating.html#crossing-trial"><i class="fa fa-check"></i><b>9.15</b> Crossing trial</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>10</b> Functions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="functions.html"><a href="functions.html#a-little-dungeons-dragons-tm-to-spice-it-up"><i class="fa fa-check"></i><b>10.1</b> A little Dungeons &amp; Dragons (tm) to spice it up</a></li>
<li class="chapter" data-level="10.2" data-path="functions.html"><a href="functions.html#geometric-and-harmonic-means"><i class="fa fa-check"></i><b>10.2</b> Geometric and harmonic means</a></li>
<li class="chapter" data-level="10.3" data-path="functions.html"><a href="functions.html#for-loop"><i class="fa fa-check"></i><b>10.3</b> for loop</a></li>
<li class="chapter" data-level="10.4" data-path="functions.html"><a href="functions.html#case_when"><i class="fa fa-check"></i><b>10.4</b> case_when()</a></li>
<li class="chapter" data-level="10.5" data-path="functions.html"><a href="functions.html#compare-this-with-if_else"><i class="fa fa-check"></i><b>10.5</b> Compare this with if_else()</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>11</b> Correlation Plots</a></li>
<li class="chapter" data-level="12" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html"><i class="fa fa-check"></i><b>12</b> Dimensionality Reduction</a>
<ul>
<li class="chapter" data-level="12.1" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#background"><i class="fa fa-check"></i><b>12.1</b> Background</a></li>
<li class="chapter" data-level="12.2" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#experiment-in-showing-dimensionality-reduction-for-pathologists"><i class="fa fa-check"></i><b>12.2</b> Experiment in showing dimensionality reduction for pathologists</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#principle-component-analysis"><i class="fa fa-check"></i><b>12.2.1</b> Principle component analysis</a></li>
<li class="chapter" data-level="12.2.2" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#t-distributed-stochastic-neighbor-embedding"><i class="fa fa-check"></i><b>12.2.2</b> t-distributed stochastic neighbor embedding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>13</b> Clustering</a></li>
<li class="chapter" data-level="14" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>14</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="14.1" data-path="regex.html"><a href="regex.html#seeking-patterns"><i class="fa fa-check"></i><b>14.1</b> Seeking patterns</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="census.html"><a href="census.html"><i class="fa fa-check"></i><b>15</b> US_Census_Data_Kyle_Walker_Presentation_YouTube</a>
<ul>
<li class="chapter" data-level="15.1" data-path="census.html"><a href="census.html#variables"><i class="fa fa-check"></i><b>15.1</b> Variables</a></li>
<li class="chapter" data-level="15.2" data-path="census.html"><a href="census.html#part-2-wrangling-census-data-with-tidyverse-tools"><i class="fa fa-check"></i><b>15.2</b> Part 2: Wrangling Census Data with <strong>tidyverse</strong> Tools</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="census.html"><a href="census.html#normalizing-the-data-with-mutate."><i class="fa fa-check"></i><b>15.2.1</b> Normalizing the data with <code>mutate()</code>.</a></li>
<li class="chapter" data-level="15.2.2" data-path="census.html"><a href="census.html#group_by-and-summarize-in-census-analysis"><i class="fa fa-check"></i><b>15.2.2</b> <code>group_by()</code> and <code>summarize()</code> in census analysis</a></li>
<li class="chapter" data-level="15.2.3" data-path="census.html"><a href="census.html#margin-of-error-considerations"><i class="fa fa-check"></i><b>15.2.3</b> Margin of error considerations</a></li>
<li class="chapter" data-level="15.2.4" data-path="census.html"><a href="census.html#visualizing-margins-of-error"><i class="fa fa-check"></i><b>15.2.4</b> Visualizing margins of error</a></li>
<li class="chapter" data-level="15.2.5" data-path="census.html"><a href="census.html#get_estimates-and-how-to-use-them"><i class="fa fa-check"></i><b>15.2.5</b> <code>get_estimates()</code> and how to use them</a></li>
<li class="chapter" data-level="15.2.6" data-path="census.html"><a href="census.html#ggbeeswarm-automates-some-jitter-considerations"><i class="fa fa-check"></i><b>15.2.6</b> <code>ggbeeswarm()</code> automates some jitter considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="knncv.html"><a href="knncv.html"><i class="fa fa-check"></i><b>16</b> <strong>K Nearest Neighbors Revisited: Cross Validation Added</strong> Tips for This Document</a></li>
<li class="chapter" data-level="17" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>17</b> Modeling</a>
<ul>
<li class="chapter" data-level="17.1" data-path="modeling.html"><a href="modeling.html#resources"><i class="fa fa-check"></i><b>17.1</b> Resources:</a></li>
<li class="chapter" data-level="17.2" data-path="modeling.html"><a href="modeling.html#classification-what-im-really-interested-in"><i class="fa fa-check"></i><b>17.2</b> Classification: what I’m really interested in</a></li>
<li class="chapter" data-level="17.3" data-path="modeling.html"><a href="modeling.html#class-imbalance-a-critical-issue-in-pituitary-adenoma-classification"><i class="fa fa-check"></i><b>17.3</b> Class imbalance: a critical issue in pituitary adenoma classification</a></li>
<li class="chapter" data-level="17.4" data-path="modeling.html"><a href="modeling.html#modeling-notes"><i class="fa fa-check"></i><b>17.4</b> Modeling notes</a></li>
<li class="chapter" data-level="17.5" data-path="modeling.html"><a href="modeling.html#out-of-sample-error-example"><i class="fa fa-check"></i><b>17.5</b> Out of sample error example</a></li>
<li class="chapter" data-level="17.6" data-path="modeling.html"><a href="modeling.html#a-regression-example-from-the-course-this-time-using-caret"><i class="fa fa-check"></i><b>17.6</b> A regression example from the course, this time using <strong>caret</strong></a></li>
<li class="chapter" data-level="17.7" data-path="modeling.html"><a href="modeling.html#classification"><i class="fa fa-check"></i><b>17.7</b> Classification</a>
<ul>
<li class="chapter" data-level="17.7.1" data-path="modeling.html"><a href="modeling.html#an-rpart-classification-example."><i class="fa fa-check"></i><b>17.7.1</b> An <strong>rpart</strong> classification example.</a></li>
</ul></li>
<li class="chapter" data-level="17.8" data-path="modeling.html"><a href="modeling.html#from-the-datacamp-course"><i class="fa fa-check"></i><b>17.8</b> From the DataCamp course</a></li>
<li class="chapter" data-level="17.9" data-path="modeling.html"><a href="modeling.html#random-forest-with-caret"><i class="fa fa-check"></i><b>17.9</b> Random forest with <strong>caret</strong></a></li>
<li class="chapter" data-level="17.10" data-path="modeling.html"><a href="modeling.html#random-forest-model-and-tunegrid"><i class="fa fa-check"></i><b>17.10</b> Random forest model and <code>tuneGrid()</code></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="moremodeling.html"><a href="moremodeling.html"><i class="fa fa-check"></i><b>18</b> More modeling</a>
<ul>
<li class="chapter" data-level="18.1" data-path="moremodeling.html"><a href="moremodeling.html#glmnet-models"><i class="fa fa-check"></i><b>18.1</b> <code>glmnet</code> models</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="moremodeling.html"><a href="moremodeling.html#parameters-for-tuning-glmnet-models"><i class="fa fa-check"></i><b>18.1.1</b> Parameters for tuning <code>glmnet</code> models</a></li>
<li class="chapter" data-level="18.1.2" data-path="moremodeling.html"><a href="moremodeling.html#an-iris-example-of-glmnet"><i class="fa fa-check"></i><b>18.1.2</b> An iris example of <code>glmnet</code></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="moremodeling.html"><a href="moremodeling.html#imputation-discussion"><i class="fa fa-check"></i><b>18.2</b> Imputation discussion</a></li>
<li class="chapter" data-level="18.3" data-path="moremodeling.html"><a href="moremodeling.html#multiple-preprocessing-methods"><i class="fa fa-check"></i><b>18.3</b> Multiple preprocessing methods</a></li>
<li class="chapter" data-level="18.4" data-path="moremodeling.html"><a href="moremodeling.html#handling-low-information-predictors"><i class="fa fa-check"></i><b>18.4</b> Handling low-information predictors</a></li>
<li class="chapter" data-level="18.5" data-path="moremodeling.html"><a href="moremodeling.html#max-kuhn-on-reusing-a-traincontrol"><i class="fa fa-check"></i><b>18.5</b> Max Kuhn on reusing a trainControl</a></li>
<li class="chapter" data-level="18.6" data-path="moremodeling.html"><a href="moremodeling.html#comparing-models"><i class="fa fa-check"></i><b>18.6</b> Comparing models</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>19</b> Working with GitHub</a>
<ul>
<li class="chapter" data-level="19.1" data-path="github.html"><a href="github.html#basic-idea"><i class="fa fa-check"></i><b>19.1</b> Basic idea</a></li>
<li class="chapter" data-level="19.2" data-path="github.html"><a href="github.html#a-couple-invaluable-websites"><i class="fa fa-check"></i><b>19.2</b> A couple invaluable websites</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html"><i class="fa fa-check"></i><b>20</b> What is machine learning?</a>
<ul>
<li class="chapter" data-level="20.1" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html#machine-learning-for-mds"><i class="fa fa-check"></i><b>20.1</b> Machine learning for MD’s</a></li>
<li class="chapter" data-level="20.2" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html#supervised-versus-unsuperised-learning"><i class="fa fa-check"></i><b>20.2</b> Supervised versus unsuperised learning</a></li>
<li class="chapter" data-level="20.3" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html#classification-versus-regression"><i class="fa fa-check"></i><b>20.3</b> Classification versus regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bill’s Drills Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simulating" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Simulating data</h1>
<p>I’ve just begun to explore R, and I realize that many of my questions could be improved with example data. Generating this kind of data takes practice, though.</p>
<p>Some good websites:
<a href="https://clayford.github.io/dwir/dwr_12_generating_data.html" class="uri">https://clayford.github.io/dwir/dwr_12_generating_data.html</a></p>
<p><a href="https://cran.r-project.org/web/packages/simstudy/vignettes/simstudy.html" class="uri">https://cran.r-project.org/web/packages/simstudy/vignettes/simstudy.html</a></p>
<p><a href="https://aosmith.rbind.io/2018/08/29/getting-started-simulating-data/" class="uri">https://aosmith.rbind.io/2018/08/29/getting-started-simulating-data/</a></p>
<p>Also, remember that R packages have a lot of great data.</p>
<p>For a quick and well-written overview of the <code>for</code> loop, see <a href="https://www.r-bloggers.com/2021/09/r-for-loop/" class="uri">https://www.r-bloggers.com/2021/09/r-for-loop/</a>.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="simulating.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code></pre></div>
<div id="sample" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Sample()</h2>
<p>Starting with Clayford’s nice (and long page):</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="simulating.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">5</span>)  <span class="co">#sample without replacement</span></span></code></pre></div>
<pre><code>## [1] 2 5 4 3 1</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="simulating.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or generate a random permutation of a vector:</span></span>
<span id="cb262-2"><a href="simulating.html#cb262-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">18</span>, <span class="dv">9</span>)</span>
<span id="cb262-3"><a href="simulating.html#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(dat)</span></code></pre></div>
<pre><code>## [1] 10 18  9 16 18 12</code></pre>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="simulating.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bootstrap resampling: sampling the same number of items</span></span>
<span id="cb264-2"><a href="simulating.html#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="co"># WITH replacement. The bootstrap method is a resampling</span></span>
<span id="cb264-3"><a href="simulating.html#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="co"># technique used to estimate statistics on a population by</span></span>
<span id="cb264-4"><a href="simulating.html#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="co"># sampling a dataset with replacement.</span></span>
<span id="cb264-5"><a href="simulating.html#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(dat, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 18 18 12 12  9 10</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="simulating.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dat)</span>
<span id="cb266-2"><a href="simulating.html#cb266-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-3"><a href="simulating.html#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(state.abb, <span class="at">size =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;UT&quot; &quot;IA&quot; &quot;NC&quot; &quot;MD&quot; &quot;OH&quot; &quot;CO&quot; &quot;GA&quot; &quot;TN&quot; &quot;PA&quot; &quot;WA&quot;</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="simulating.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using 1:6 and size=1, we can simulate the roll of a die:</span></span>
<span id="cb268-2"><a href="simulating.html#cb268-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="simulating.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can simulate the roll of a die 100 times by setting</span></span>
<span id="cb270-2"><a href="simulating.html#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="co"># size=100 and replace=TRUE</span></span>
<span id="cb270-3"><a href="simulating.html#cb270-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##   [1] 4 2 4 1 6 1 4 1 6 2 3 2 6 6 2 5 2 6 6 6 1 3 3 6 4 6 3 1 4 5 1 1 6 4 5 5 4
##  [38] 6 5 4 4 1 5 5 6 1 1 3 6 2 2 3 6 2 4 3 5 2 2 1 3 3 2 2 5 2 5 4 5 4 6 1 3 2
##  [75] 3 3 1 5 6 6 6 4 4 1 5 5 6 1 3 6 3 6 3 3 4 1 1 4 2 6</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="simulating.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sample produces a vector, so we can manipulate it as we</span></span>
<span id="cb272-2"><a href="simulating.html#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="co"># would any other vector. For example, simulate a 100 die</span></span>
<span id="cb272-3"><a href="simulating.html#cb272-3" aria-hidden="true" tabindex="-1"></a><span class="co"># rolls and tally up the totals using table() and</span></span>
<span id="cb272-4"><a href="simulating.html#cb272-4" aria-hidden="true" tabindex="-1"></a><span class="co"># prop.table():</span></span>
<span id="cb272-5"><a href="simulating.html#cb272-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## 
##  1  2  3  4  5  6 
## 20 17 14 17 17 15</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="simulating.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<pre><code>## 
##    1    2    3    4    5    6 
## 0.20 0.17 0.13 0.20 0.19 0.11</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="simulating.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">sample</span>(state.abb, <span class="at">size =</span> <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## 
## AK AL AR AZ CA CO CT DE FL GA HI IA ID IL IN KS KY LA MA MD ME MI MN MO MS MT 
## 22 23 19 18 30 20 18 19 26 24 23 14 19 30 18 18 15 11 26 23 21 22 27 27 18 20 
## NC ND NE NH NJ NM NV NY OH OK OR PA RI SC SD TN TX UT VA VT WA WI WV WY 
## 20 17 18 23 17 20 18 17 17 22 18 14 19 21 17 20 10 24 21 16 20 19 28 13</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="simulating.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(<span class="fu">sample</span>(state.abb, <span class="at">size =</span> <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<pre><code>## 
##    AK    AL    AR    AZ    CA    CO    CT    DE    FL    GA    HI    IA    ID 
## 0.025 0.010 0.023 0.024 0.021 0.018 0.023 0.013 0.019 0.014 0.024 0.019 0.022 
##    IL    IN    KS    KY    LA    MA    MD    ME    MI    MN    MO    MS    MT 
## 0.021 0.018 0.022 0.018 0.020 0.023 0.019 0.020 0.019 0.015 0.015 0.028 0.023 
##    NC    ND    NE    NH    NJ    NM    NV    NY    OH    OK    OR    PA    RI 
## 0.015 0.023 0.015 0.014 0.017 0.019 0.023 0.025 0.020 0.011 0.016 0.019 0.023 
##    SC    SD    TN    TX    UT    VA    VT    WA    WI    WV    WY 
## 0.024 0.032 0.025 0.020 0.015 0.019 0.026 0.024 0.016 0.016 0.027</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="simulating.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the forward-pipe operator: %&gt;%</span></span>
<span id="cb280-2"><a href="simulating.html#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     set_names</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="simulating.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb284-2"><a href="simulating.html#cb284-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb284-3"><a href="simulating.html#cb284-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">prop.table</span>()</span></code></pre></div>
<pre><code>## .
##    1    2    3    4    5    6 
## 0.20 0.17 0.13 0.19 0.15 0.16</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="simulating.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or simulate rolling two dice and summing the total:</span></span>
<span id="cb286-2"><a href="simulating.html#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="simulating.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same thing with %&gt;%</span></span>
<span id="cb288-2"><a href="simulating.html#cb288-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">6</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb288-3"><a href="simulating.html#cb288-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="simulating.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simulate rolling two dice 100 times by updating the</span></span>
<span id="cb290-2"><a href="simulating.html#cb290-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sample &#39;space&#39;</span></span>
<span id="cb290-3"><a href="simulating.html#cb290-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">size =</span> <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##   [1] 10  7 12  7  9  5  9 11  9  7 12 10  3  2 12  4  5 10 12 11 10 12 10  8 10
##  [26]  5 11  8 12 12  4  5  5  9 11  9 11 10  2  7  9  8 11  7  8 12  5  6 11  3
##  [51]  9  5  7 10 11  5  8 11  4  6  4  6  4  5  7 12  9 10  2 11  6 11  9  5  4
##  [76] 12 10  6 11  5 11  8 10 10 10 11  7 11  5  4  9 10 11  6  9  3 11 12  3 11</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="simulating.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="co"># proportion of &#39;snake-eyes&#39; in 1000 rolls</span></span>
<span id="cb292-2"><a href="simulating.html#cb292-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">sample</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">size =</span> <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">==</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.089</code></pre>
</div>
<div id="replicate" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> replicate()</h2>
<p>We can use the replicate() function to replicate samples. The replicate()
function allows you to replicate an expression as many times as you specify.
The basix syntax is replicate(n, expr) where n is the number of replications
and expr is the expression you want to replicate.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="simulating.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Roll 2 dice and keep the largest number, 10,000 times:</span></span>
<span id="cb294-2"><a href="simulating.html#cb294-2" aria-hidden="true" tabindex="-1"></a>rolls <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="at">n =</span> <span class="fl">1e+05</span>, <span class="at">expr =</span> <span class="fu">max</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb294-3"><a href="simulating.html#cb294-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb294-4"><a href="simulating.html#cb294-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate proportions:</span></span>
<span id="cb294-5"><a href="simulating.html#cb294-5" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(rolls))</span></code></pre></div>
<pre><code>## rolls
##       1       2       3       4       5       6 
## 0.02840 0.08260 0.13818 0.19460 0.24991 0.30631</code></pre>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="simulating.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(rolls))</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="simulating.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(rolls)</span></code></pre></div>
</div>
<div id="sample-revisited" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> sample() revisited</h2>
<p>The sample function also has a prob argument that allows you to assign
probabilities to your items. For example to simulate the flip of a loaded
coin, with Tails having probability 0.65:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="simulating.html#cb298-1" aria-hidden="true" tabindex="-1"></a>flips <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;T&quot;</span>), <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.35</span>,</span>
<span id="cb298-2"><a href="simulating.html#cb298-2" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.65</span>))</span>
<span id="cb298-3"><a href="simulating.html#cb298-3" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(flips))</span></code></pre></div>
<pre><code>## flips
##     H     T 
## 0.337 0.663</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="simulating.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(flips)</span></code></pre></div>
<p>Coins are nice, but we can also use sample to generate practical data, for
example males and females. A web site says UVa has 11,632 female
students and 10,353 male students as of Fall 2015.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="simulating.html#cb301-1" aria-hidden="true" tabindex="-1"></a>uva <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">11632</span>, <span class="dv">10353</span>)  <span class="co"># female, male</span></span>
<span id="cb301-2"><a href="simulating.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(uva<span class="sc">/</span><span class="fu">sum</span>(uva), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.53 0.47</code></pre>
<p>Note how elegantly this answers a basic question. Nice!</p>
<p>We can generate a fake random sample of 500 UVa students with a weighted sampling scheme like so:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="simulating.html#cb303-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>), <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>,</span>
<span id="cb303-2"><a href="simulating.html#cb303-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.53</span>, <span class="fl">0.47</span>))</span>
<span id="cb303-3"><a href="simulating.html#cb303-3" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(students))</span></code></pre></div>
<pre><code>## students
## female   male 
##   0.54   0.46</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="simulating.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(students, uva)</span></code></pre></div>
<p>When used with subsetting brackets, sample() can be used to create training
and test sets. For example, say we want to build some sort of predictive model using our training data. We may want to use half our data to build the model and then use the other half to evaluate its performance.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="simulating.html#cb306-1" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(iris), <span class="at">size =</span> <span class="fu">nrow</span>(iris)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb306-2"><a href="simulating.html#cb306-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-3"><a href="simulating.html#cb306-3" aria-hidden="true" tabindex="-1"></a><span class="co"># train is a random sample of numbers from 1 - 365. We can</span></span>
<span id="cb306-4"><a href="simulating.html#cb306-4" aria-hidden="true" tabindex="-1"></a><span class="co"># treat these like row numbers.</span></span>
<span id="cb306-5"><a href="simulating.html#cb306-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-6"><a href="simulating.html#cb306-6" aria-hidden="true" tabindex="-1"></a>irisTrain <span class="ot">&lt;-</span> iris[train, ]</span>
<span id="cb306-7"><a href="simulating.html#cb306-7" aria-hidden="true" tabindex="-1"></a>irisTest <span class="ot">&lt;-</span> iris[<span class="sc">-</span>train, ]</span>
<span id="cb306-8"><a href="simulating.html#cb306-8" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm no intersection</span></span>
<span id="cb306-9"><a href="simulating.html#cb306-9" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">intersect</span>(irisTrain, irisTest)</span></code></pre></div>
<pre><code>## [1] Sepal.Length Sepal.Width  Petal.Length Petal.Width  Species     
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="simulating.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(train, irisTest, irisTrain)</span></code></pre></div>
</div>
<div id="generating-fixed-levels--" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> generating fixed levels ————————————————-</h2>
<p>Often generating data means creating a series of fixed levels, such as 10
males and 10 females. The rep() function can be useful for this. Below we
replicate 10 each of “M” and “F”:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="simulating.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">each =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot;
## [20] &quot;F&quot;</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="simulating.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">times =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot;
## [20] &quot;F&quot;</code></pre>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="simulating.html#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">length.out =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot;</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="simulating.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or just length, for short</span></span>
<span id="cb315-2"><a href="simulating.html#cb315-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">length =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;M&quot;</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="simulating.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that all these generated a character vector. To</span></span>
<span id="cb317-2"><a href="simulating.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use as a &#39;factor&#39;, we would need to wrap it in the</span></span>
<span id="cb317-3"><a href="simulating.html#cb317-3" aria-hidden="true" tabindex="-1"></a><span class="co"># factor() function.</span></span>
<span id="cb317-4"><a href="simulating.html#cb317-4" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">each =</span> <span class="dv">10</span>))</span></code></pre></div>
<pre><code>##  [1] M M M M M M M M M M F F F F F F F F F F
## Levels: F M</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="simulating.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A function specifically for creating factors is the gl()</span></span>
<span id="cb319-2"><a href="simulating.html#cb319-2" aria-hidden="true" tabindex="-1"></a><span class="co"># function. gl = &#39;generate levels&#39;. Below we generate a</span></span>
<span id="cb319-3"><a href="simulating.html#cb319-3" aria-hidden="true" tabindex="-1"></a><span class="co"># factor with 2 levels of 10 each and labels of &#39;M&#39; and</span></span>
<span id="cb319-4"><a href="simulating.html#cb319-4" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;F&#39;. Notice the result is a factor.</span></span>
<span id="cb319-5"><a href="simulating.html#cb319-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">k =</span> <span class="dv">10</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] M M M M M M M M M M F F F F F F F F F F
## Levels: M F</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="simulating.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A more common occurence is combinations of fixed levels,</span></span>
<span id="cb321-2"><a href="simulating.html#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="co"># say gender, education, and status. A function that helps</span></span>
<span id="cb321-3"><a href="simulating.html#cb321-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create every combination of levels is expand.grid().</span></span>
<span id="cb321-4"><a href="simulating.html#cb321-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Below we generate every combination of the levels</span></span>
<span id="cb321-5"><a href="simulating.html#cb321-5" aria-hidden="true" tabindex="-1"></a><span class="co"># provided for gender, education, and status. Notice the</span></span>
<span id="cb321-6"><a href="simulating.html#cb321-6" aria-hidden="true" tabindex="-1"></a><span class="co"># first factors vary fastest.</span></span>
<span id="cb321-7"><a href="simulating.html#cb321-7" aria-hidden="true" tabindex="-1"></a><span class="fu">expand.grid</span>(<span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">education =</span> <span class="fu">c</span>(<span class="st">&quot;HS&quot;</span>, <span class="st">&quot;College&quot;</span>,</span>
<span id="cb321-8"><a href="simulating.html#cb321-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Advanced&quot;</span>), <span class="at">status =</span> <span class="fu">c</span>(<span class="st">&quot;Single&quot;</span>, <span class="st">&quot;Married&quot;</span>, <span class="st">&quot;Divorced&quot;</span>,</span>
<span id="cb321-9"><a href="simulating.html#cb321-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Widowed&quot;</span>))</span></code></pre></div>
<pre><code>##    gender education   status
## 1       M        HS   Single
## 2       F        HS   Single
## 3       M   College   Single
## 4       F   College   Single
## 5       M  Advanced   Single
## 6       F  Advanced   Single
## 7       M        HS  Married
## 8       F        HS  Married
## 9       M   College  Married
## 10      F   College  Married
## 11      M  Advanced  Married
## 12      F  Advanced  Married
## 13      M        HS Divorced
## 14      F        HS Divorced
## 15      M   College Divorced
## 16      F   College Divorced
## 17      M  Advanced Divorced
## 18      F  Advanced Divorced
## 19      M        HS  Widowed
## 20      F        HS  Widowed
## 21      M   College  Widowed
## 22      F   College  Widowed
## 23      M  Advanced  Widowed
## 24      F  Advanced  Widowed</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="simulating.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that creates a data frame that we can save:</span></span>
<span id="cb323-2"><a href="simulating.html#cb323-2" aria-hidden="true" tabindex="-1"></a>DF <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="at">education =</span> <span class="fu">c</span>(<span class="st">&quot;HS&quot;</span>, <span class="st">&quot;College&quot;</span>,</span>
<span id="cb323-3"><a href="simulating.html#cb323-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Advanced&quot;</span>), <span class="at">status =</span> <span class="fu">c</span>(<span class="st">&quot;Single&quot;</span>, <span class="st">&quot;Married&quot;</span>, <span class="st">&quot;Divorced&quot;</span>,</span>
<span id="cb323-4"><a href="simulating.html#cb323-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Widowed&quot;</span>))</span>
<span id="cb323-5"><a href="simulating.html#cb323-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(DF)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="simulating.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(DF)</span></code></pre></div>
<p>Or imagine an experiment where 3 people throw 3 different kinds of paper airplanes, made of 3 paper types (3x3 = 9 planes), throwing each plane 8 times.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="simulating.html#cb326-1" aria-hidden="true" tabindex="-1"></a>schedule <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">thrower =</span> <span class="fu">c</span>(<span class="st">&quot;Clay&quot;</span>, <span class="st">&quot;Rod&quot;</span>, <span class="st">&quot;Kevin&quot;</span>),</span>
<span id="cb326-2"><a href="simulating.html#cb326-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">paper =</span> <span class="fu">c</span>(<span class="st">&quot;18&quot;</span>, <span class="st">&quot;20&quot;</span>, <span class="st">&quot;24&quot;</span>), <span class="at">design =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="at">rep =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb326-3"><a href="simulating.html#cb326-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-4"><a href="simulating.html#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomize and drop the rep column. The</span></span>
<span id="cb326-5"><a href="simulating.html#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sample(nrow(schedule)) code scrambles the numbers 1</span></span>
<span id="cb326-6"><a href="simulating.html#cb326-6" aria-hidden="true" tabindex="-1"></a><span class="co"># through 216, which I then use to randomly shuffle the</span></span>
<span id="cb326-7"><a href="simulating.html#cb326-7" aria-hidden="true" tabindex="-1"></a><span class="co"># schedule of throws.</span></span>
<span id="cb326-8"><a href="simulating.html#cb326-8" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(schedule))</span>
<span id="cb326-9"><a href="simulating.html#cb326-9" aria-hidden="true" tabindex="-1"></a>schedule <span class="ot">&lt;-</span> schedule[k, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb326-10"><a href="simulating.html#cb326-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(schedule, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##     thrower paper design
## 21    Kevin    18      c
## 88     Clay    24      a
## 173     Rod    18      b
## 162   Kevin    24      c
## 98      Rod    24      b
## 216   Kevin    24      c
## 215     Rod    24      c
## 175    Clay    20      b
## 46     Clay    18      c
## 123   Kevin    20      b</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="simulating.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># output to csv file for logging &#39;distance flown&#39; data</span></span>
<span id="cb328-2"><a href="simulating.html#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(schedule, <span class="at">file =</span> <span class="st">&quot;throwLog.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb328-3"><a href="simulating.html#cb328-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-4"><a href="simulating.html#cb328-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(k, schedule)</span></code></pre></div>
<p>This is a great way to set up an experiment, but I’d like to <strong>also</strong> add data for the throw, based on interesting distributions (normal, etc.). How would I generate samples for each contestant that was based on slightly different distributions?</p>
<p>What sort of distribution? See this page to get a quick refresher on common distributions: <a href="https://www.analyticsvidhya.com/blog/2017/09/6-probability-distributions-data-science/" class="uri">https://www.analyticsvidhya.com/blog/2017/09/6-probability-distributions-data-science/</a>.</p>
<p>Note also that ?distributions gives you the distributions in {stats}. Persevere for a time.</p>
</div>
<div id="generating-numerical-sequences" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> generating numerical sequences</h2>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="simulating.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The seq() function allows you to generate sequences of</span></span>
<span id="cb329-2"><a href="simulating.html#cb329-2" aria-hidden="true" tabindex="-1"></a><span class="co"># numbers:</span></span>
<span id="cb329-3"><a href="simulating.html#cb329-3" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1]  0  2  4  6  8 10</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="simulating.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>##  [1]  0.0  0.2  0.4  0.6  0.8  1.0  1.2  1.4  1.6  1.8  2.0  2.2  2.4  2.6  2.8
## [16]  3.0  3.2  3.4  3.6  3.8  4.0  4.2  4.4  4.6  4.8  5.0  5.2  5.4  5.6  5.8
## [31]  6.0  6.2  6.4  6.6  6.8  7.0  7.2  7.4  7.6  7.8  8.0  8.2  8.4  8.6  8.8
## [46]  9.0  9.2  9.4  9.6  9.8 10.0</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="simulating.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Go backwards</span></span>
<span id="cb333-2"><a href="simulating.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">100</span>)</span></code></pre></div>
<pre><code>##  [1] 1000  900  800  700  600  500  400  300  200  100    0</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="simulating.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The seq() function has a length.out argument that allows</span></span>
<span id="cb335-2"><a href="simulating.html#cb335-2" aria-hidden="true" tabindex="-1"></a><span class="co"># you to specify the size of the vector you want to create.</span></span>
<span id="cb335-3"><a href="simulating.html#cb335-3" aria-hidden="true" tabindex="-1"></a><span class="co"># It automatically calculates the increment. We usually</span></span>
<span id="cb335-4"><a href="simulating.html#cb335-4" aria-hidden="true" tabindex="-1"></a><span class="co"># just abbreviate to length</span></span>
<span id="cb335-5"><a href="simulating.html#cb335-5" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="at">length =</span> <span class="dv">30</span>)</span></code></pre></div>
<pre><code>##  [1]  1.000000  1.310345  1.620690  1.931034  2.241379  2.551724  2.862069
##  [8]  3.172414  3.482759  3.793103  4.103448  4.413793  4.724138  5.034483
## [15]  5.344828  5.655172  5.965517  6.275862  6.586207  6.896552  7.206897
## [22]  7.517241  7.827586  8.137931  8.448276  8.758621  9.068966  9.379310
## [29]  9.689655 10.000000</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="simulating.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The colon operator(:) also allows you to generate regular</span></span>
<span id="cb337-2"><a href="simulating.html#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sequences in steps of 1.</span></span>
<span id="cb337-3"><a href="simulating.html#cb337-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="simulating.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="sc">:-</span><span class="dv">10</span>  <span class="co"># reverse direction</span></span></code></pre></div>
<pre><code>##  [1]  10   9   8   7   6   5   4   3   2   1   0  -1  -2  -3  -4  -5  -6  -7  -8
## [20]  -9 -10</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="simulating.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># When used with factors, the colon operator generates an</span></span>
<span id="cb341-2"><a href="simulating.html#cb341-2" aria-hidden="true" tabindex="-1"></a><span class="co"># interaction factor:</span></span>
<span id="cb341-3"><a href="simulating.html#cb341-3" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">k =</span> <span class="dv">3</span>)</span>
<span id="cb341-4"><a href="simulating.html#cb341-4" aria-hidden="true" tabindex="-1"></a>f1</span></code></pre></div>
<pre><code>## [1] 1 1 1 2 2 2
## Levels: 1 2</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="simulating.html#cb343-1" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">2</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</span>
<span id="cb343-2"><a href="simulating.html#cb343-2" aria-hidden="true" tabindex="-1"></a>f2</span></code></pre></div>
<pre><code>## [1] a a b b c c
## Levels: a b c</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="simulating.html#cb345-1" aria-hidden="true" tabindex="-1"></a>f1<span class="sc">:</span>f2</span></code></pre></div>
<pre><code>## [1] 1:a 1:a 1:b 2:b 2:c 2:c
## Levels: 1:a 1:b 1:c 2:a 2:b 2:c</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="simulating.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(f1, f2)</span></code></pre></div>
<p>The last step seems akin to perfectly shuffling two decks of cards (the decks must be of equal length).</p>
</div>
<div id="seq_along-and-seq_len." class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> seq_along() and seq_len().</h2>
<p>seq_along() returns the indices of a vector while seq_len(n) returns an integer vector of 1:n.</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="simulating.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">120</span>)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21</code></pre>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="simulating.html#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(state.abb)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="simulating.html#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="dv">12</span>)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12</code></pre>
</div>
<div id="generating-random-data-from-a-probability-distribution" class="section level2" number="9.7">
<h2><span class="header-section-number">9.7</span> generating random data from a probability distribution</h2>
<p>A central idea in inferential statistics is that the distribution of data can often be approximated by a theoretical distribution. R provides functions for working with several well-known theoretical distributions, including the
ability to generate data from those distributions. A common one is the rnorm() function which generates data from a Normal distribution.</p>
<p>In R, the functions for theoretical distributions take the form of dxxx, pxxx, qxxx and rxxx.</p>
<ul>
<li>dxxx is for the probability density/mass function (dnorm)</li>
<li>pxxx is for the cumulative distribution function (pnorm)</li>
<li>qxxx is for the quantile function (qnorm)</li>
<li>rxxx is for random variate generation (rnorm)</li>
</ul>
<p>For random variate generation we’re interested in the rxxx variety.</p>
</div>
<div id="normal-distribution" class="section level2" number="9.8">
<h2><span class="header-section-number">9.8</span> Normal distribution:</h2>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="simulating.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 random draws from N(100,5)</span></span>
<span id="cb354-2"><a href="simulating.html#cb354-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">100</span>, <span class="at">sd =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1]  98.66742 101.16132 102.19461  86.84940 101.51612  99.95910  99.20285
##  [8]  92.69651 100.47816  97.25796</code></pre>
</div>
<div id="binomial-distribution" class="section level2" number="9.9">
<h2><span class="header-section-number">9.9</span> Binomial distribution:</h2>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="simulating.html#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 random draws from b(1,0.5) AKA, 10 coin flips (size is</span></span>
<span id="cb356-2"><a href="simulating.html#cb356-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the number of trials)</span></span>
<span id="cb356-3"><a href="simulating.html#cb356-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 0 1 1 1 0 1 1 0</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="simulating.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 random draws from b(1,0.8) AKA, 10 coin flips with a</span></span>
<span id="cb358-2"><a href="simulating.html#cb358-2" aria-hidden="true" tabindex="-1"></a><span class="co"># coin loaded Heads (or Tails) 80% of time</span></span>
<span id="cb358-3"><a href="simulating.html#cb358-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>##  [1] 0 1 1 0 1 0 1 1 1 0</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="simulating.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 random draws from b(10,0.5) AKA, 10 results of 10 coin</span></span>
<span id="cb360-2"><a href="simulating.html#cb360-2" aria-hidden="true" tabindex="-1"></a><span class="co"># flips</span></span>
<span id="cb360-3"><a href="simulating.html#cb360-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">prob =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>##  [1] 5 3 4 5 8 5 5 3 5 7</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="simulating.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can use a binomial distribution to simulate dichotmous</span></span>
<span id="cb362-2"><a href="simulating.html#cb362-2" aria-hidden="true" tabindex="-1"></a><span class="co"># answers such as Yes/No or success/fail. Simulate a vector</span></span>
<span id="cb362-3"><a href="simulating.html#cb362-3" aria-hidden="true" tabindex="-1"></a><span class="co"># of responses where respondents are 65% likely to say Yes</span></span>
<span id="cb362-4"><a href="simulating.html#cb362-4" aria-hidden="true" tabindex="-1"></a><span class="co"># (1) versus No (0)</span></span>
<span id="cb362-5"><a href="simulating.html#cb362-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> <span class="fl">0.65</span>)</span></code></pre></div>
<pre><code>##  [1] 0 1 1 1 1 1 1 1 1 0</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="simulating.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="co"># could also just use sample</span></span>
<span id="cb364-2"><a href="simulating.html#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;Y&quot;</span>, <span class="st">&quot;N&quot;</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.65</span>,</span>
<span id="cb364-3"><a href="simulating.html#cb364-3" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.35</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;Y&quot; &quot;Y&quot; &quot;N&quot; &quot;Y&quot; &quot;Y&quot; &quot;Y&quot; &quot;Y&quot; &quot;Y&quot; &quot;Y&quot; &quot;Y&quot;</code></pre>
</div>
<div id="uniform-distribution" class="section level2" number="9.10">
<h2><span class="header-section-number">9.10</span> Uniform distribution</h2>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="simulating.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 random draws from a uniform distribution u(0,100)</span></span>
<span id="cb366-2"><a href="simulating.html#cb366-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">100</span>)</span></code></pre></div>
<pre><code>##  [1] 81.88379 12.41300 37.03454 68.18687 58.59851 29.09355 38.68486 70.76103
##  [9] 57.85143 26.29435</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="simulating.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A uniform distribution can be good for random sampling.</span></span>
<span id="cb368-2"><a href="simulating.html#cb368-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s say we want to sample about 10% of iris data:</span></span>
<span id="cb368-3"><a href="simulating.html#cb368-3" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(iris), <span class="dv">0</span>, <span class="dv">1</span>)  <span class="co"># [0,1] interval is default</span></span>
<span id="cb368-4"><a href="simulating.html#cb368-4" aria-hidden="true" tabindex="-1"></a>sbSamp <span class="ot">&lt;-</span> iris[k <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]  <span class="co"># sample about 10% of rows</span></span>
<span id="cb368-5"><a href="simulating.html#cb368-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sbSamp)</span></code></pre></div>
<pre><code>## [1] 19  5</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="simulating.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr does this as well without the need for runif; and</span></span>
<span id="cb370-2"><a href="simulating.html#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="co"># it&#39;s precise in its sampling fraction.</span></span>
<span id="cb370-3"><a href="simulating.html#cb370-3" aria-hidden="true" tabindex="-1"></a>sbSamp <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">sample_frac</span>(iris, <span class="fl">0.1</span>)  <span class="co"># sample exactly 10% of rows</span></span>
<span id="cb370-4"><a href="simulating.html#cb370-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sbSamp)</span></code></pre></div>
<pre><code>## [1] 15  5</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="simulating.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(sbSamp, k)</span></code></pre></div>
</div>
<div id="sampling-from-multiple-distributions-building-in-a-difference" class="section level2" number="9.11">
<h2><span class="header-section-number">9.11</span> Sampling from multiple distributions (building in a “difference”)</h2>
<p>The arguments to rxxx functions can take vectors! This means we can use one
function call to generate draws from multiple distributions.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="simulating.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alternating random values from N(10,4) and N(100,40)</span></span>
<span id="cb373-2"><a href="simulating.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">100</span>), <span class="at">sd =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">40</span>))</span></code></pre></div>
<pre><code>##  [1]   5.328161  66.468495   1.823437 119.813332  -1.211117 110.227283
##  [7]   3.420011  89.456878  -1.939389 102.805432</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="simulating.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 30 random draws, 10 each from N(10,4), N(90,4) and</span></span>
<span id="cb375-2"><a href="simulating.html#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="co"># N(400,4)</span></span>
<span id="cb375-3"><a href="simulating.html#cb375-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="at">mean =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">90</span>, <span class="dv">400</span>), <span class="at">each =</span> <span class="dv">10</span>), <span class="at">sd =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>##  [1]  11.848625   7.062857  10.235013  15.881340  12.131422  11.880648
##  [7]   8.966321  19.317164   5.844385  10.035814  94.940950  89.576164
## [13]  90.230197  85.438534  93.371686  88.581047  91.377628  96.031555
## [19]  91.066694  90.106946 403.013600 404.661590 401.158407 395.135567
## [25] 395.681059 399.562900 403.008095 398.163003 399.153346 401.710149</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="simulating.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 100 random draws, 50 each from b(5,0.5) and b(50,0.5)</span></span>
<span id="cb377-2"><a href="simulating.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">size =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">50</span>), <span class="at">each =</span> <span class="dv">50</span>), <span class="at">prob =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>##   [1]  2  1  1  3  2  3  3  2  4  3  3  1  1  2  3  3  1  3  5  3  2  2  1  4  1
##  [26]  2  4  2  2  2  1  1  2  1  2  3  2  2  2  1  3  5  3  1  2  3  2  1  3  3
##  [51] 22 28 24 25 17 29 24 29 24 21 27 17 18 25 27 28 24 21 21 19 24 24 30 26 25
##  [76] 25 24 26 19 21 25 30 21 24 23 28 29 26 24 21 20 25 30 24 25 27 28 28 25 25</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="simulating.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combined with matrix(), one can generate &#39;multiple&#39;</span></span>
<span id="cb379-2"><a href="simulating.html#cb379-2" aria-hidden="true" tabindex="-1"></a><span class="co"># random samples from a distribution. For example, draw 5</span></span>
<span id="cb379-3"><a href="simulating.html#cb379-3" aria-hidden="true" tabindex="-1"></a><span class="co"># random samples of size 10 from a N(10,1):</span></span>
<span id="cb379-4"><a href="simulating.html#cb379-4" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">10</span> <span class="sc">*</span> <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">1</span>), <span class="at">ncol =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##            [,1]      [,2]      [,3]      [,4]      [,5]
##  [1,]  9.036184  8.228816  8.428310 10.091784 10.065903
##  [2,] 11.913161 10.620178  9.533036  9.962295 10.750959
##  [3,] 10.225506  9.167468 10.672955  9.281624  8.699020
##  [4,]  8.944468  9.821513  9.451991  9.983957  9.879833
##  [5,] 10.245307 10.086259  7.673951  8.919391  7.219819
##  [6,]  9.172797  9.202411  9.046613 10.015565 11.270271
##  [7,] 10.881257  9.188296  7.803665 10.467794 11.208078
##  [8,]  9.592817 10.217848 10.368692 10.538772 10.116299
##  [9,]  9.986472 10.271840 10.405884  9.796671  9.990211
## [10,] 10.512477  9.200774  9.942726 10.109449 12.321032</code></pre>
<p>Note that in the last example, we technically drew one sample of size 50 and then laid it out in a 10x5 matrix.</p>
</div>
<div id="the-good-stuff-building-in-a-difference-based-on-a-categorical-variable" class="section level2" number="9.12">
<h2><span class="header-section-number">9.12</span> The good stuff: building in a difference based on a categorical variable</h2>
<p>Using ifelse() we can generate different data based on a TRUE/FALSE condition. Let’s say we have treated and untreated subjects. I’d like to generate Normal data that differs based on the treatment.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="simulating.html#cb381-1" aria-hidden="true" tabindex="-1"></a>trtmt <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;Treated&quot;</span>, <span class="st">&quot;Untreated&quot;</span>), <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb381-2"><a href="simulating.html#cb381-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(trtmt <span class="sc">==</span> <span class="st">&quot;Treated&quot;</span>, <span class="at">yes =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">1</span>), <span class="at">no =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>,</span>
<span id="cb381-3"><a href="simulating.html#cb381-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">20</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>##  [1] 20.723912  9.103286 20.321116  9.547927 11.594527  9.951724 20.725621
##  [8] 19.123367 10.712649 10.387431 11.443424 10.326516 20.600475 19.225502
## [15] 12.802787 20.061200 18.900170  9.107065 10.968940 19.913210</code></pre>
<p>Notice we have to make the length of the yes/no arguments the SAME LENGTH as
the trtmt==“Treated” logical vector! What happens if we use rnorm(n=1,…)?</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="simulating.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What about more than two groups?</span></span>
<span id="cb383-2"><a href="simulating.html#cb383-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb383-3"><a href="simulating.html#cb383-3" aria-hidden="true" tabindex="-1"></a>trtmt <span class="ot">&lt;-</span> <span class="fu">sample</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb383-4"><a href="simulating.html#cb383-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb383-5"><a href="simulating.html#cb383-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Say we want to generate differnt Normal data for each</span></span>
<span id="cb383-6"><a href="simulating.html#cb383-6" aria-hidden="true" tabindex="-1"></a><span class="co"># group. One way is to do a for-loop with multiple if</span></span>
<span id="cb383-7"><a href="simulating.html#cb383-7" aria-hidden="true" tabindex="-1"></a><span class="co"># statements:</span></span>
<span id="cb383-8"><a href="simulating.html#cb383-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb383-9"><a href="simulating.html#cb383-9" aria-hidden="true" tabindex="-1"></a>val <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)  <span class="co"># empty vector</span></span>
<span id="cb383-10"><a href="simulating.html#cb383-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(trtmt)) {</span>
<span id="cb383-11"><a href="simulating.html#cb383-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (trtmt[i] <span class="sc">==</span> <span class="st">&quot;A&quot;</span>)</span>
<span id="cb383-12"><a href="simulating.html#cb383-12" aria-hidden="true" tabindex="-1"></a>        val[i] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>) <span class="cf">else</span> <span class="cf">if</span> (trtmt[i] <span class="sc">==</span> <span class="st">&quot;B&quot;</span>)</span>
<span id="cb383-13"><a href="simulating.html#cb383-13" aria-hidden="true" tabindex="-1"></a>        val[i] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">4</span>) <span class="cf">else</span> <span class="cf">if</span> (trtmt[i] <span class="sc">==</span> <span class="st">&quot;C&quot;</span>)</span>
<span id="cb383-14"><a href="simulating.html#cb383-14" aria-hidden="true" tabindex="-1"></a>        val[i] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">30</span>, <span class="dv">6</span>) <span class="cf">else</span> <span class="cf">if</span> (trtmt[i] <span class="sc">==</span> <span class="st">&quot;D&quot;</span>)</span>
<span id="cb383-15"><a href="simulating.html#cb383-15" aria-hidden="true" tabindex="-1"></a>        val[i] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">40</span>, <span class="dv">8</span>) <span class="cf">else</span> <span class="cf">if</span> (trtmt[i] <span class="sc">==</span> <span class="st">&quot;E&quot;</span>)</span>
<span id="cb383-16"><a href="simulating.html#cb383-16" aria-hidden="true" tabindex="-1"></a>        val[i] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="dv">10</span>) <span class="cf">else</span> val[i] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">60</span>, <span class="dv">12</span>)</span>
<span id="cb383-17"><a href="simulating.html#cb383-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb383-18"><a href="simulating.html#cb383-18" aria-hidden="true" tabindex="-1"></a>val</span></code></pre></div>
<pre><code>##   [1] 46.428174 44.149738 57.184741  9.444044 21.952955 40.899507 18.971545
##   [8] 67.328571  8.829315 23.373316 40.745680 35.435106 22.076307 43.229001
##  [15]  9.933163 63.906776 11.864437 37.008983 36.467848 30.492950  8.892441
##  [22] 25.672618 31.616476 10.657223  8.788681 34.070005 28.740924 10.902777
##  [29] 12.561193 40.689616 48.250545 40.021587 75.263679 24.693692 19.667534
##  [36]  9.904587 15.224703 57.870358 24.683829 39.118094 40.870632  8.263384
##  [43] 48.458739 28.779333 34.003611 12.509631 22.316084 46.162946 25.784933
##  [50] 22.618044 30.772797 43.094284 48.876835 17.692924 20.991486  7.169333
##  [57] 24.267032 24.119535 25.705284 22.971583 24.535180 26.107435 51.398646
##  [64] 43.035241 52.284173 17.363235 30.782361 63.252764 30.796179 43.137001
##  [71] 54.610548 45.011287 36.655019 52.862881 41.153461 42.421820 26.524985
##  [78] 34.965579 12.135669 45.094289 51.411124 45.331861 33.654875 34.265608
##  [85]  8.905355 10.811275 66.883548 31.759255 67.279860 19.700615 46.482875
##  [92] 62.759488 17.019218 14.568455 49.128917 24.946838  9.148043 68.921827
##  [99] 10.273990 72.894250 38.748923 19.193598  9.934198 53.964612 23.631532
## [106] 34.327352 41.509801  7.875897 77.793672  8.115391 60.009636 58.913676
## [113] 17.612787 40.103619 50.379651 10.133235 18.808507 25.141638 23.825021
## [120] 33.311633 60.245335 38.960925 62.230869  8.032158 61.796108 12.053449
## [127] 61.890543  9.581448 40.886643 17.785047 43.934795 51.361943 41.651089
## [134] 50.673786 32.345359 60.682757 32.732852 20.205942 10.714730 33.482836
## [141] 13.743926 62.813966 21.270051 67.357492 11.149672 32.115698 41.641582
## [148] 41.262360 19.833400 32.546026 12.723434 33.186941 15.858358 25.123512
## [155] 12.186821 35.192922 39.477760 52.813907 76.205267 58.630979 41.665793
## [162] 34.020803 52.238890 14.895215 21.571451 49.759234 34.510709 11.315521
## [169]  6.851515 29.957946 24.752574 31.406862  9.867611 10.730757 10.398206
## [176] 52.019241  7.746008 71.048458 22.342669 43.450229 30.747764 30.276315
## [183]  9.931689 11.477259 33.096321 25.101114  9.361784 35.146203 41.400045
## [190] 56.273348 61.415905 10.008457  9.709782 34.436554 52.076178 10.826817
## [197] 76.394982 30.280178 52.615341 56.993582</code></pre>
<p>A more R-like way would be to take advantage of vectorized functions. First
create a data frame with one row for each group and the mean and standard
deviations we want to use to generate the data for that group.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="simulating.html#cb385-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">g =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="at">mean =</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">60</span>, <span class="dv">10</span>), <span class="at">sd =</span> <span class="fu">seq</span>(<span class="dv">2</span>,</span>
<span id="cb385-2"><a href="simulating.html#cb385-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">12</span>, <span class="dv">2</span>))</span>
<span id="cb385-3"><a href="simulating.html#cb385-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-4"><a href="simulating.html#cb385-4" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>##   g mean sd
## 1 A   10  2
## 2 B   20  4
## 3 C   30  6
## 4 D   40  8
## 5 E   50 10
## 6 F   60 12</code></pre>
<p>dat is currently a petite little dataframe of 6 rows.</p>
<p>Now sample the row numbers (1 - 6) WITH replacement. We can use these to
randomly sample the data frame rows.</p>
<p>ASIDE: Recall that we can repeatedly call a row or element using subsetting brackets. For example, call the first row of iris 5 times:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="simulating.html#cb387-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), ]</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1            5.1         3.5          1.4         0.2  setosa
## 1.1          5.1         3.5          1.4         0.2  setosa
## 1.2          5.1         3.5          1.4         0.2  setosa
## 1.3          5.1         3.5          1.4         0.2  setosa
## 1.4          5.1         3.5          1.4         0.2  setosa</code></pre>
<p>Let’s exploit that to randomly sample with replacement our data frame of
groups:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="simulating.html#cb389-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb389-2"><a href="simulating.html#cb389-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb389-3"><a href="simulating.html#cb389-3" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat[k, ]</span>
<span id="cb389-4"><a href="simulating.html#cb389-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb389-5"><a href="simulating.html#cb389-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    200 obs. of  3 variables:
##  $ g   : chr  &quot;E&quot; &quot;E&quot; &quot;E&quot; &quot;F&quot; ...
##  $ mean: num  50 50 50 60 30 50 60 60 10 30 ...
##  $ sd  : num  10 10 10 12 6 10 12 12 2 6 ...</code></pre>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="simulating.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now generate our data for each group using ONE call to</span></span>
<span id="cb391-2"><a href="simulating.html#cb391-2" aria-hidden="true" tabindex="-1"></a><span class="co"># rnorm.</span></span>
<span id="cb391-3"><a href="simulating.html#cb391-3" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>vals <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> dat<span class="sc">$</span>mean, <span class="at">sd =</span> dat<span class="sc">$</span>sd)</span>
<span id="cb391-4"><a href="simulating.html#cb391-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre><code>##     g mean sd     vals
## 5   E   50 10 63.35170
## 5.1 E   50 10 49.93744
## 5.2 E   50 10 50.23682
## 6   F   60 12 32.64805
## 3   C   30  6 36.57889
## 5.3 E   50 10 51.80706</code></pre>
<p>This is pretty neat. We go from one little dataframe to a larger one in a few lines of code. Mean and SD can be varied by the class, “g” in this case.</p>
</div>
<div id="a-demonstration-of-the-central-limit-theorem" class="section level2" number="9.13">
<h2><span class="header-section-number">9.13</span> A demonstration of the Central Limit Theorem</h2>
<p>The Central Limit Theorem states that the sum of a large number of independent random variables will be approximately normally distributed almost regardless of their individual distributions. We can demonstrate this using various rxxx functions.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="simulating.html#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sum 6 values from 6 different distributions (sample size</span></span>
<span id="cb393-2"><a href="simulating.html#cb393-2" aria-hidden="true" tabindex="-1"></a><span class="co"># = 6)</span></span>
<span id="cb393-3"><a href="simulating.html#cb393-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10000</span>  <span class="co"># simulate 1000 times</span></span>
<span id="cb393-4"><a href="simulating.html#cb393-4" aria-hidden="true" tabindex="-1"></a>clt <span class="ot">&lt;-</span> <span class="fu">rexp</span>(n, <span class="at">rate =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">rbinom</span>(n, <span class="dv">10</span>, <span class="fl">0.4</span>) <span class="sc">+</span> <span class="fu">rchisq</span>(n, <span class="at">df =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb393-5"><a href="simulating.html#cb393-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rnorm</span>(n, <span class="dv">12</span>, <span class="dv">12</span>) <span class="sc">+</span> <span class="fu">rpois</span>(n, <span class="at">lambda =</span> <span class="dv">3</span>) <span class="sc">+</span> <span class="fu">rt</span>(n, <span class="at">df =</span> <span class="dv">7</span>)</span>
<span id="cb393-6"><a href="simulating.html#cb393-6" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span>
<span id="cb393-7"><a href="simulating.html#cb393-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb393-8"><a href="simulating.html#cb393-8" aria-hidden="true" tabindex="-1"></a><span class="co"># overlay a normal density curve</span></span>
<span id="cb393-9"><a href="simulating.html#cb393-9" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(clt), <span class="fu">max</span>(clt), <span class="at">length =</span> <span class="dv">500</span>)  <span class="co"># x</span></span>
<span id="cb393-10"><a href="simulating.html#cb393-10" aria-hidden="true" tabindex="-1"></a>Y <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(X, <span class="at">mean =</span> <span class="fu">mean</span>(clt), <span class="at">sd =</span> <span class="fu">sd</span>(clt))  <span class="co"># f(x) = dnorm</span></span>
<span id="cb393-11"><a href="simulating.html#cb393-11" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(X, Y, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)  <span class="co"># plot (x,y) coordinates as a &#39;blue&#39; line (&#39;l&#39;)</span></span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-94-1.png" width="672" /></p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="simulating.html#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(X, Y, clt)</span></code></pre></div>
<p>Let’s unpack some of this:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="simulating.html#cb395-1" aria-hidden="true" tabindex="-1"></a>clt1 <span class="ot">&lt;-</span> <span class="fu">rexp</span>(n, <span class="at">rate =</span> <span class="dv">1</span>)</span>
<span id="cb395-2"><a href="simulating.html#cb395-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt1, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-1.png" width="672" /></p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="simulating.html#cb396-1" aria-hidden="true" tabindex="-1"></a>clt2 <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">10</span>, <span class="fl">0.4</span>)</span>
<span id="cb396-2"><a href="simulating.html#cb396-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt2, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-2.png" width="672" /></p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="simulating.html#cb397-1" aria-hidden="true" tabindex="-1"></a>clt3 <span class="ot">&lt;-</span> <span class="fu">rchisq</span>(n, <span class="at">df =</span> <span class="dv">6</span>)</span>
<span id="cb397-2"><a href="simulating.html#cb397-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt3, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-3.png" width="672" /></p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="simulating.html#cb398-1" aria-hidden="true" tabindex="-1"></a>clt4 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">12</span>, <span class="dv">12</span>)</span>
<span id="cb398-2"><a href="simulating.html#cb398-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt4, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-4.png" width="672" /></p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="simulating.html#cb399-1" aria-hidden="true" tabindex="-1"></a>clt5 <span class="ot">&lt;-</span> <span class="fu">rpois</span>(n, <span class="at">lambda =</span> <span class="dv">3</span>)</span>
<span id="cb399-2"><a href="simulating.html#cb399-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt5, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-5.png" width="672" /></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="simulating.html#cb400-1" aria-hidden="true" tabindex="-1"></a>clt6 <span class="ot">&lt;-</span> <span class="fu">rt</span>(n, <span class="at">df =</span> <span class="dv">7</span>)</span>
<span id="cb400-2"><a href="simulating.html#cb400-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(clt6, <span class="at">freq =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-6.png" width="672" /></p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="simulating.html#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All of this base R graphing is clunky and doesn&#39;t lend</span></span>
<span id="cb401-2"><a href="simulating.html#cb401-2" aria-hidden="true" tabindex="-1"></a><span class="co"># itself to modification as well as ggplot() figures.</span></span>
<span id="cb401-3"><a href="simulating.html#cb401-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb401-4"><a href="simulating.html#cb401-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb401-5"><a href="simulating.html#cb401-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(clt1, clt2, clt3, clt4, clt5, clt6)</span>
<span id="cb401-6"><a href="simulating.html#cb401-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb401-7"><a href="simulating.html#cb401-7" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb401-8"><a href="simulating.html#cb401-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(clt3)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-7.png" width="672" /></p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="simulating.html#cb402-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb402-2"><a href="simulating.html#cb402-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(clt3)) <span class="sc">+</span> <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-95-8.png" width="672" /></p>
</div>
<div id="overlaying-normal-curve-on-histogram" class="section level2" number="9.14">
<h2><span class="header-section-number">9.14</span> Overlaying normal curve on histogram</h2>
<p>The following solution was on StackOverflow at <a href="https://stackoverflow.com/questions/6967664/ggplot2-histogram-with-normal-curve" class="uri">https://stackoverflow.com/questions/6967664/ggplot2-histogram-with-normal-curve</a></p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="simulating.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb403-2"><a href="simulating.html#cb403-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">PF =</span> <span class="dv">10</span> <span class="sc">*</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>))</span>
<span id="cb403-3"><a href="simulating.html#cb403-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df1, <span class="fu">aes</span>(<span class="at">x =</span> PF)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..),</span>
<span id="cb403-4"><a href="simulating.html#cb403-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">40</span>, <span class="dv">40</span>, <span class="at">by =</span> <span class="dv">5</span>), <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb403-5"><a href="simulating.html#cb403-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(df1<span class="sc">$</span>PF),</span>
<span id="cb403-6"><a href="simulating.html#cb403-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">sd =</span> <span class="fu">sd</span>(df1<span class="sc">$</span>PF)), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
<p>From the {ggplot2} help: “This stat makes it easy to superimpose a function on top of an existing plot. The function is called with a grid of evenly spaced values along the x axis, and the results are drawn (by default) with a line.”</p>
<p>Note how stat_function() lends itself to quick addition: simply feed the correct fun and args to the function.</p>
<p>Now accomplish this for clt3</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="simulating.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> clt3)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..),</span>
<span id="cb404-2"><a href="simulating.html#cb404-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="at">by =</span> <span class="dv">1</span>), <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-3"><a href="simulating.html#cb404-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_function</span>(<span class="at">fun =</span> dchisq, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">df =</span> <span class="dv">6</span>), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-4"><a href="simulating.html#cb404-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;chi-squared distribution&quot;</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p>Note how the args in dchisq includes only the df = 6. No mean needs to be calculated (as in dnorm).</p>
<p>Now accomplish this for clt1</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="simulating.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> clt1)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..),</span>
<span id="cb405-2"><a href="simulating.html#cb405-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">8</span>, <span class="at">by =</span> <span class="fl">0.5</span>), <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-3"><a href="simulating.html#cb405-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_function</span>(<span class="at">fun =</span> dexp, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">rate =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-4"><a href="simulating.html#cb405-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;exponential distribution&quot;</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
</div>
<div id="crossing-trial" class="section level2" number="9.15">
<h2><span class="header-section-number">9.15</span> Crossing trial</h2>
<p>From David Robinson birthday paradox Rblogger at <a href="https://www.r-bloggers.com/the-birthday-paradox-puzzle-tidy-simulation-in-r/" class="uri">https://www.r-bloggers.com/the-birthday-paradox-puzzle-tidy-simulation-in-r/</a></p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="simulating.html#cb406-1" aria-hidden="true" tabindex="-1"></a>summarized <span class="ot">&lt;-</span> <span class="fu">crossing</span>(<span class="at">people =</span> <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">50</span>, <span class="dv">2</span>), <span class="at">trial =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb406-2"><a href="simulating.html#cb406-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">birthday =</span> <span class="fu">map</span>(people, <span class="sc">~</span><span class="fu">sample</span>(<span class="dv">365</span>, .x, <span class="at">replace =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb406-3"><a href="simulating.html#cb406-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">multiple =</span> <span class="fu">map_lgl</span>(birthday, <span class="sc">~</span><span class="fu">any</span>(<span class="fu">duplicated</span>(.x)))) <span class="sc">%&gt;%</span></span>
<span id="cb406-4"><a href="simulating.html#cb406-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(people) <span class="sc">%&gt;%</span></span>
<span id="cb406-5"><a href="simulating.html#cb406-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">chance =</span> <span class="fu">mean</span>(multiple))</span>
<span id="cb406-6"><a href="simulating.html#cb406-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-7"><a href="simulating.html#cb406-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summarized, <span class="fu">aes</span>(people, chance)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb406-8"><a href="simulating.html#cb406-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Probability two have the same birthday&quot;</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-99-1.png" width="672" /></p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="simulating.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the work with pbirthday function</span></span>
<span id="cb407-2"><a href="simulating.html#cb407-2" aria-hidden="true" tabindex="-1"></a>summarized <span class="sc">%&gt;%</span></span>
<span id="cb407-3"><a href="simulating.html#cb407-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">exact =</span> <span class="fu">map_dbl</span>(people, pbirthday)) <span class="sc">%&gt;%</span></span>
<span id="cb407-4"><a href="simulating.html#cb407-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(people, chance)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> exact),</span>
<span id="cb407-5"><a href="simulating.html#cb407-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb407-6"><a href="simulating.html#cb407-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Probability two have the same birthday&quot;</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-99-2.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sampling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/09simulatingData.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["test-book.pdf", "test-book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

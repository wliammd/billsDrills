<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Data Exploration | Bill’s Drills Book</title>
  <meta name="description" content="Chapter 7 Data Exploration | Bill’s Drills Book" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Data Exploration | Bill’s Drills Book" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="https://github.com/wliammd/billsDrills" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Data Exploration | Bill’s Drills Book" />
  
  
  

<meta name="author" content="William McDonald" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="subset.html"/>
<link rel="next" href="sampling.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Bill's Drills Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Drills: Part of Every Healthy Intellectual Diet</a></li>
<li class="chapter" data-level="2" data-path="bookdownplan.html"><a href="bookdownplan.html"><i class="fa fa-check"></i><b>2</b> <strong>bookdown</strong> Tips for This Document</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bookdownplan.html"><a href="bookdownplan.html#basic-conventions"><i class="fa fa-check"></i><b>2.1</b> Basic conventions</a></li>
<li class="chapter" data-level="2.2" data-path="bookdownplan.html"><a href="bookdownplan.html#rstudio-tip-preview-in-viewer-pane"><i class="fa fa-check"></i><b>2.2</b> RStudio Tip: Preview in Viewer Pane</a></li>
<li class="chapter" data-level="2.3" data-path="bookdownplan.html"><a href="bookdownplan.html#inserting-pictures"><i class="fa fa-check"></i><b>2.3</b> Inserting pictures</a></li>
<li class="chapter" data-level="2.4" data-path="bookdownplan.html"><a href="bookdownplan.html#referencing-other-parts-of-the-document"><i class="fa fa-check"></i><b>2.4</b> Referencing other parts of the document</a></li>
<li class="chapter" data-level="2.5" data-path="bookdownplan.html"><a href="bookdownplan.html#referencing-citations"><i class="fa fa-check"></i><b>2.5</b> Referencing citations:</a></li>
<li class="chapter" data-level="2.6" data-path="bookdownplan.html"><a href="bookdownplan.html#figures."><i class="fa fa-check"></i><b>2.6</b> Figures.</a></li>
<li class="chapter" data-level="2.7" data-path="bookdownplan.html"><a href="bookdownplan.html#working-with-github"><i class="fa fa-check"></i><b>2.7</b> Working with Github</a></li>
<li class="chapter" data-level="2.8" data-path="bookdownplan.html"><a href="bookdownplan.html#working-with-a-lot-of-packages"><i class="fa fa-check"></i><b>2.8</b> Working with a lot of packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="datashape.html"><a href="datashape.html"><i class="fa fa-check"></i><b>3</b> Shape of Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="datashape.html"><a href="datashape.html#making-data-frames"><i class="fa fa-check"></i><b>3.1</b> Making data frames</a></li>
<li class="chapter" data-level="3.2" data-path="datashape.html"><a href="datashape.html#the-humble-table"><i class="fa fa-check"></i><b>3.2</b> The humble table</a></li>
<li class="chapter" data-level="3.3" data-path="datashape.html"><a href="datashape.html#gather-spread-pivoting-in-the-tidyverse"><i class="fa fa-check"></i><b>3.3</b> Gather, spread, pivoting in the tidyverse</a></li>
<li class="chapter" data-level="3.4" data-path="datashape.html"><a href="datashape.html#gathering-steam"><i class="fa fa-check"></i><b>3.4</b> Gathering steam…</a></li>
<li class="chapter" data-level="3.5" data-path="datashape.html"><a href="datashape.html#spread-your-wings"><i class="fa fa-check"></i><b>3.5</b> Spread your wings</a></li>
<li class="chapter" data-level="3.6" data-path="datashape.html"><a href="datashape.html#missing-data-ich-vemisse-dich"><i class="fa fa-check"></i><b>3.6</b> Missing Data: Ich vemisse Dich!</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="datashape.html"><a href="datashape.html#you-completeme"><i class="fa fa-check"></i><b>3.6.1</b> You complete(me)</a></li>
<li class="chapter" data-level="3.6.2" data-path="datashape.html"><a href="datashape.html#filling-in-the-gaps"><i class="fa fa-check"></i><b>3.6.2</b> fill(ing) in the gaps</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="datashape.html"><a href="datashape.html#pivoting-to-something-new"><i class="fa fa-check"></i><b>3.7</b> Pivoting to something new</a></li>
<li class="chapter" data-level="3.8" data-path="datashape.html"><a href="datashape.html#larger-structures"><i class="fa fa-check"></i><b>3.8</b> Larger structures</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="changenames.html"><a href="changenames.html"><i class="fa fa-check"></i><b>4</b> By Any Other Name</a>
<ul>
<li class="chapter" data-level="4.1" data-path="changenames.html"><a href="changenames.html#a-financial-example"><i class="fa fa-check"></i><b>4.1</b> A financial example</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="factorpractice.html"><a href="factorpractice.html"><i class="fa fa-check"></i><b>5</b> Factor Practice</a>
<ul>
<li class="chapter" data-level="5.1" data-path="factorpractice.html"><a href="factorpractice.html#the-basic-structure"><i class="fa fa-check"></i><b>5.1</b> The basic structure</a></li>
<li class="chapter" data-level="5.2" data-path="factorpractice.html"><a href="factorpractice.html#not-all-nominal-data-is-a-factor"><i class="fa fa-check"></i><b>5.2</b> Not all nominal data is a factor</a></li>
<li class="chapter" data-level="5.3" data-path="factorpractice.html"><a href="factorpractice.html#making-variables-into-factors"><i class="fa fa-check"></i><b>5.3</b> Making variables into factors</a></li>
<li class="chapter" data-level="5.4" data-path="factorpractice.html"><a href="factorpractice.html#inspecting-factors"><i class="fa fa-check"></i><b>5.4</b> Inspecting factors</a></li>
<li class="chapter" data-level="5.5" data-path="factorpractice.html"><a href="factorpractice.html#fct_lump"><i class="fa fa-check"></i><b>5.5</b> fct_lump()</a></li>
<li class="chapter" data-level="5.6" data-path="factorpractice.html"><a href="factorpractice.html#fct_infreq-and-fct_rev"><i class="fa fa-check"></i><b>5.6</b> fct_infreq() and fct_rev()</a></li>
<li class="chapter" data-level="5.7" data-path="factorpractice.html"><a href="factorpractice.html#additional-practice"><i class="fa fa-check"></i><b>5.7</b> Additional practice</a></li>
<li class="chapter" data-level="5.8" data-path="factorpractice.html"><a href="factorpractice.html#reordering-factors"><i class="fa fa-check"></i><b>5.8</b> Reordering Factors</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="factorpractice.html"><a href="factorpractice.html#fct_reorder2-another-way-to-improve-legibility"><i class="fa fa-check"></i><b>5.8.1</b> fct_reorder2(): another way to improve legibility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="subset.html"><a href="subset.html"><i class="fa fa-check"></i><b>6</b> Subsetting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="subset.html"><a href="subset.html#subsetting-using-brackets"><i class="fa fa-check"></i><b>6.1</b> Subsetting using brackets</a></li>
<li class="chapter" data-level="6.2" data-path="subset.html"><a href="subset.html#subset-using-brackets-by-omitting-the-rows-and-columns-we-dont-want"><i class="fa fa-check"></i><b>6.2</b> Subset using brackets by omitting the rows and columns we don’t want</a></li>
<li class="chapter" data-level="6.3" data-path="subset.html"><a href="subset.html#subset-using-brackets-in-combination-with-the-which-function-and-the-in-operator"><i class="fa fa-check"></i><b>6.3</b> Subset using brackets in combination with the which() function and the %in% operator</a></li>
<li class="chapter" data-level="6.4" data-path="subset.html"><a href="subset.html#subset-using-the-subset-function"><i class="fa fa-check"></i><b>6.4</b> Subset using the subset() function</a></li>
<li class="chapter" data-level="6.5" data-path="subset.html"><a href="subset.html#subset-using-dyplyrs-filter-and-select"><i class="fa fa-check"></i><b>6.5</b> Subset using dyplyr’s filter() and select()</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dataexploration.html"><a href="dataexploration.html"><i class="fa fa-check"></i><b>7</b> Data Exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dataexploration.html"><a href="dataexploration.html#counting-things.-the-naming-of-parts."><i class="fa fa-check"></i><b>7.1</b> Counting things. The naming of parts.</a></li>
<li class="chapter" data-level="7.2" data-path="dataexploration.html"><a href="dataexploration.html#fct_infreq"><i class="fa fa-check"></i><b>7.2</b> fct_infreq</a></li>
<li class="chapter" data-level="7.3" data-path="dataexploration.html"><a href="dataexploration.html#weight-weight-dont-tell-me"><i class="fa fa-check"></i><b>7.3</b> Weight weight, don’t tell me!</a></li>
<li class="chapter" data-level="7.4" data-path="dataexploration.html"><a href="dataexploration.html#summarize-is-another-very-useful-function"><i class="fa fa-check"></i><b>7.4</b> Summarize is another very useful function:</a></li>
<li class="chapter" data-level="7.5" data-path="dataexploration.html"><a href="dataexploration.html#graphical-displays"><i class="fa fa-check"></i><b>7.5</b> Graphical displays</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="dataexploration.html"><a href="dataexploration.html#joyplots"><i class="fa fa-check"></i><b>7.5.1</b> Joyplots</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="dataexploration.html"><a href="dataexploration.html#relative-versus-absolute-risk"><i class="fa fa-check"></i><b>7.6</b> Relative versus absolute risk</a></li>
<li class="chapter" data-level="7.7" data-path="dataexploration.html"><a href="dataexploration.html#removing-duplicates"><i class="fa fa-check"></i><b>7.7</b> Removing duplicates</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sampling.html"><a href="sampling.html"><i class="fa fa-check"></i><b>8</b> Sampling</a>
<ul>
<li class="chapter" data-level="8.1" data-path="sampling.html"><a href="sampling.html#think-about-throwing-a-bunch-of-dice."><i class="fa fa-check"></i><b>8.1</b> Think about throwing a bunch of dice.</a></li>
<li class="chapter" data-level="8.2" data-path="sampling.html"><a href="sampling.html#a-keen-way-to-divide-up-a-dataset-into-testing-and-training-components."><i class="fa fa-check"></i><b>8.2</b> A keen way to divide up a dataset into testing and training components.</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="simulating.html"><a href="simulating.html"><i class="fa fa-check"></i><b>9</b> Simulating data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="simulating.html"><a href="simulating.html#sample"><i class="fa fa-check"></i><b>9.1</b> Sample()</a></li>
<li class="chapter" data-level="9.2" data-path="simulating.html"><a href="simulating.html#replicate"><i class="fa fa-check"></i><b>9.2</b> replicate()</a></li>
<li class="chapter" data-level="9.3" data-path="simulating.html"><a href="simulating.html#sample-revisited"><i class="fa fa-check"></i><b>9.3</b> sample() revisited</a></li>
<li class="chapter" data-level="9.4" data-path="simulating.html"><a href="simulating.html#generating-fixed-levels--"><i class="fa fa-check"></i><b>9.4</b> generating fixed levels ————————————————-</a></li>
<li class="chapter" data-level="9.5" data-path="simulating.html"><a href="simulating.html#generating-numerical-sequences"><i class="fa fa-check"></i><b>9.5</b> generating numerical sequences</a></li>
<li class="chapter" data-level="9.6" data-path="simulating.html"><a href="simulating.html#seq_along-and-seq_len."><i class="fa fa-check"></i><b>9.6</b> seq_along() and seq_len().</a></li>
<li class="chapter" data-level="9.7" data-path="simulating.html"><a href="simulating.html#generating-random-data-from-a-probability-distribution"><i class="fa fa-check"></i><b>9.7</b> generating random data from a probability distribution</a></li>
<li class="chapter" data-level="9.8" data-path="simulating.html"><a href="simulating.html#normal-distribution"><i class="fa fa-check"></i><b>9.8</b> Normal distribution:</a></li>
<li class="chapter" data-level="9.9" data-path="simulating.html"><a href="simulating.html#binomial-distribution"><i class="fa fa-check"></i><b>9.9</b> Binomial distribution:</a></li>
<li class="chapter" data-level="9.10" data-path="simulating.html"><a href="simulating.html#uniform-distribution"><i class="fa fa-check"></i><b>9.10</b> Uniform distribution</a></li>
<li class="chapter" data-level="9.11" data-path="simulating.html"><a href="simulating.html#sampling-from-multiple-distributions-building-in-a-difference"><i class="fa fa-check"></i><b>9.11</b> Sampling from multiple distributions (building in a “difference”)</a></li>
<li class="chapter" data-level="9.12" data-path="simulating.html"><a href="simulating.html#the-good-stuff-building-in-a-difference-based-on-a-categorical-variable"><i class="fa fa-check"></i><b>9.12</b> The good stuff: building in a difference based on a categorical variable</a></li>
<li class="chapter" data-level="9.13" data-path="simulating.html"><a href="simulating.html#a-demonstration-of-the-central-limit-theorem"><i class="fa fa-check"></i><b>9.13</b> A demonstration of the Central Limit Theorem</a></li>
<li class="chapter" data-level="9.14" data-path="simulating.html"><a href="simulating.html#overlaying-normal-curve-on-histogram"><i class="fa fa-check"></i><b>9.14</b> Overlaying normal curve on histogram</a></li>
<li class="chapter" data-level="9.15" data-path="simulating.html"><a href="simulating.html#crossing-trial"><i class="fa fa-check"></i><b>9.15</b> Crossing trial</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>10</b> Functions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="functions.html"><a href="functions.html#a-little-dungeons-dragons-tm-to-spice-it-up"><i class="fa fa-check"></i><b>10.1</b> A little Dungeons &amp; Dragons (tm) to spice it up</a></li>
<li class="chapter" data-level="10.2" data-path="functions.html"><a href="functions.html#geometric-and-harmonic-means"><i class="fa fa-check"></i><b>10.2</b> Geometric and harmonic means</a></li>
<li class="chapter" data-level="10.3" data-path="functions.html"><a href="functions.html#for-loop"><i class="fa fa-check"></i><b>10.3</b> for loop</a></li>
<li class="chapter" data-level="10.4" data-path="functions.html"><a href="functions.html#case_when"><i class="fa fa-check"></i><b>10.4</b> case_when()</a></li>
<li class="chapter" data-level="10.5" data-path="functions.html"><a href="functions.html#compare-this-with-if_else"><i class="fa fa-check"></i><b>10.5</b> Compare this with if_else()</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>11</b> Correlation Plots</a></li>
<li class="chapter" data-level="12" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html"><i class="fa fa-check"></i><b>12</b> Dimensionality Reduction</a>
<ul>
<li class="chapter" data-level="12.1" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#background"><i class="fa fa-check"></i><b>12.1</b> Background</a></li>
<li class="chapter" data-level="12.2" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#experiment-in-showing-dimensionality-reduction-for-pathologists"><i class="fa fa-check"></i><b>12.2</b> Experiment in showing dimensionality reduction for pathologists</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#principle-component-analysis"><i class="fa fa-check"></i><b>12.2.1</b> Principle component analysis</a></li>
<li class="chapter" data-level="12.2.2" data-path="dimensionalityreduction.html"><a href="dimensionalityreduction.html#t-distributed-stochastic-neighbor-embedding"><i class="fa fa-check"></i><b>12.2.2</b> t-distributed stochastic neighbor embedding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>13</b> Clustering</a></li>
<li class="chapter" data-level="14" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>14</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="14.1" data-path="regex.html"><a href="regex.html#seeking-patterns"><i class="fa fa-check"></i><b>14.1</b> Seeking patterns</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="census.html"><a href="census.html"><i class="fa fa-check"></i><b>15</b> US_Census_Data_Kyle_Walker_Presentation_YouTube</a>
<ul>
<li class="chapter" data-level="15.1" data-path="census.html"><a href="census.html#variables"><i class="fa fa-check"></i><b>15.1</b> Variables</a></li>
<li class="chapter" data-level="15.2" data-path="census.html"><a href="census.html#part-2-wrangling-census-data-with-tidyverse-tools"><i class="fa fa-check"></i><b>15.2</b> Part 2: Wrangling Census Data with <strong>tidyverse</strong> Tools</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="census.html"><a href="census.html#normalizing-the-data-with-mutate."><i class="fa fa-check"></i><b>15.2.1</b> Normalizing the data with <code>mutate()</code>.</a></li>
<li class="chapter" data-level="15.2.2" data-path="census.html"><a href="census.html#group_by-and-summarize-in-census-analysis"><i class="fa fa-check"></i><b>15.2.2</b> <code>group_by()</code> and <code>summarize()</code> in census analysis</a></li>
<li class="chapter" data-level="15.2.3" data-path="census.html"><a href="census.html#margin-of-error-considerations"><i class="fa fa-check"></i><b>15.2.3</b> Margin of error considerations</a></li>
<li class="chapter" data-level="15.2.4" data-path="census.html"><a href="census.html#visualizing-margins-of-error"><i class="fa fa-check"></i><b>15.2.4</b> Visualizing margins of error</a></li>
<li class="chapter" data-level="15.2.5" data-path="census.html"><a href="census.html#get_estimates-and-how-to-use-them"><i class="fa fa-check"></i><b>15.2.5</b> <code>get_estimates()</code> and how to use them</a></li>
<li class="chapter" data-level="15.2.6" data-path="census.html"><a href="census.html#ggbeeswarm-automates-some-jitter-considerations"><i class="fa fa-check"></i><b>15.2.6</b> <code>ggbeeswarm()</code> automates some jitter considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="knncv.html"><a href="knncv.html"><i class="fa fa-check"></i><b>16</b> <strong>K Nearest Neighbors Revisited: Cross Validation Added</strong> Tips for This Document</a></li>
<li class="chapter" data-level="17" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>17</b> Modeling</a>
<ul>
<li class="chapter" data-level="17.1" data-path="modeling.html"><a href="modeling.html#resources"><i class="fa fa-check"></i><b>17.1</b> Resources:</a></li>
<li class="chapter" data-level="17.2" data-path="modeling.html"><a href="modeling.html#classification-what-im-really-interested-in"><i class="fa fa-check"></i><b>17.2</b> Classification: what I’m really interested in</a></li>
<li class="chapter" data-level="17.3" data-path="modeling.html"><a href="modeling.html#class-imbalance-a-critical-issue-in-pituitary-adenoma-classification"><i class="fa fa-check"></i><b>17.3</b> Class imbalance: a critical issue in pituitary adenoma classification</a></li>
<li class="chapter" data-level="17.4" data-path="modeling.html"><a href="modeling.html#modeling-notes"><i class="fa fa-check"></i><b>17.4</b> Modeling notes</a></li>
<li class="chapter" data-level="17.5" data-path="modeling.html"><a href="modeling.html#out-of-sample-error-example"><i class="fa fa-check"></i><b>17.5</b> Out of sample error example</a></li>
<li class="chapter" data-level="17.6" data-path="modeling.html"><a href="modeling.html#a-regression-example-from-the-course-this-time-using-caret"><i class="fa fa-check"></i><b>17.6</b> A regression example from the course, this time using <strong>caret</strong></a></li>
<li class="chapter" data-level="17.7" data-path="modeling.html"><a href="modeling.html#classification"><i class="fa fa-check"></i><b>17.7</b> Classification</a>
<ul>
<li class="chapter" data-level="17.7.1" data-path="modeling.html"><a href="modeling.html#an-rpart-classification-example."><i class="fa fa-check"></i><b>17.7.1</b> An <strong>rpart</strong> classification example.</a></li>
</ul></li>
<li class="chapter" data-level="17.8" data-path="modeling.html"><a href="modeling.html#from-the-datacamp-course"><i class="fa fa-check"></i><b>17.8</b> From the DataCamp course</a></li>
<li class="chapter" data-level="17.9" data-path="modeling.html"><a href="modeling.html#random-forest-with-caret"><i class="fa fa-check"></i><b>17.9</b> Random forest with <strong>caret</strong></a></li>
<li class="chapter" data-level="17.10" data-path="modeling.html"><a href="modeling.html#random-forest-model-and-tunegrid"><i class="fa fa-check"></i><b>17.10</b> Random forest model and <code>tuneGrid()</code></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="moremodeling.html"><a href="moremodeling.html"><i class="fa fa-check"></i><b>18</b> More modeling</a>
<ul>
<li class="chapter" data-level="18.1" data-path="moremodeling.html"><a href="moremodeling.html#glmnet-models"><i class="fa fa-check"></i><b>18.1</b> <code>glmnet</code> models</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="moremodeling.html"><a href="moremodeling.html#parameters-for-tuning-glmnet-models"><i class="fa fa-check"></i><b>18.1.1</b> Parameters for tuning <code>glmnet</code> models</a></li>
<li class="chapter" data-level="18.1.2" data-path="moremodeling.html"><a href="moremodeling.html#an-iris-example-of-glmnet"><i class="fa fa-check"></i><b>18.1.2</b> An iris example of <code>glmnet</code></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="moremodeling.html"><a href="moremodeling.html#imputation-discussion"><i class="fa fa-check"></i><b>18.2</b> Imputation discussion</a></li>
<li class="chapter" data-level="18.3" data-path="moremodeling.html"><a href="moremodeling.html#multiple-preprocessing-methods"><i class="fa fa-check"></i><b>18.3</b> Multiple preprocessing methods</a></li>
<li class="chapter" data-level="18.4" data-path="moremodeling.html"><a href="moremodeling.html#handling-low-information-predictors"><i class="fa fa-check"></i><b>18.4</b> Handling low-information predictors</a></li>
<li class="chapter" data-level="18.5" data-path="moremodeling.html"><a href="moremodeling.html#max-kuhn-on-reusing-a-traincontrol"><i class="fa fa-check"></i><b>18.5</b> Max Kuhn on reusing a trainControl</a></li>
<li class="chapter" data-level="18.6" data-path="moremodeling.html"><a href="moremodeling.html#comparing-models"><i class="fa fa-check"></i><b>18.6</b> Comparing models</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>19</b> Working with GitHub</a>
<ul>
<li class="chapter" data-level="19.1" data-path="github.html"><a href="github.html#basic-idea"><i class="fa fa-check"></i><b>19.1</b> Basic idea</a></li>
<li class="chapter" data-level="19.2" data-path="github.html"><a href="github.html#a-couple-invaluable-websites"><i class="fa fa-check"></i><b>19.2</b> A couple invaluable websites</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html"><i class="fa fa-check"></i><b>20</b> What is machine learning?</a>
<ul>
<li class="chapter" data-level="20.1" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html#machine-learning-for-mds"><i class="fa fa-check"></i><b>20.1</b> Machine learning for MD’s</a></li>
<li class="chapter" data-level="20.2" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html#supervised-versus-unsuperised-learning"><i class="fa fa-check"></i><b>20.2</b> Supervised versus unsuperised learning</a></li>
<li class="chapter" data-level="20.3" data-path="explainingmachinelearning.html"><a href="explainingmachinelearning.html#classification-versus-regression"><i class="fa fa-check"></i><b>20.3</b> Classification versus regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bill’s Drills Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataexploration" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Data Exploration</h1>
<p>Data exploration is one of the most important aspects of data science and forms the cornerstone of my drills. Nonetheless, I have lots of room for improvement.</p>
<p>I like Hadley Wickham’s writing and find his approach exceptionally clear. Therefore, I’ll use the <strong>tidyverse</strong>.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="dataexploration.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="counting-things.-the-naming-of-parts." class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Counting things. The naming of parts.</h2>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="dataexploration.html#cb210-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb210-2"><a href="dataexploration.html#cb210-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(species)) <span class="sc">%&gt;%</span></span>
<span id="cb210-3"><a href="dataexploration.html#cb210-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">species =</span> <span class="fu">fct_lump</span>(species, <span class="dv">5</span>), <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb210-4"><a href="dataexploration.html#cb210-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_reorder</span>(species, n)) <span class="sc">%&gt;%</span></span>
<span id="cb210-5"><a href="dataexploration.html#cb210-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(species, n)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:starfig-1a"></span>
<img src="test-book_files/figure-html/starfig-1a-1.png" alt="Starwars Figure 1" width="672" />
<p class="caption">
Figure 7.1: Starwars Figure 1
</p>
</div>
<p>I like stacked bars for their economy, but it’s easy to over do it. Supperimposing gender onto the columns seems easy…</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="dataexploration.html#cb211-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb211-2"><a href="dataexploration.html#cb211-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(species)) <span class="sc">%&gt;%</span></span>
<span id="cb211-3"><a href="dataexploration.html#cb211-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">species =</span> <span class="fu">fct_lump</span>(species, <span class="dv">5</span>), <span class="at">gender =</span> <span class="fu">fct_lump</span>(gender,</span>
<span id="cb211-4"><a href="dataexploration.html#cb211-4" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span>), <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb211-5"><a href="dataexploration.html#cb211-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_reorder</span>(species, n)) <span class="sc">%&gt;%</span></span>
<span id="cb211-6"><a href="dataexploration.html#cb211-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(species, n, <span class="at">fill =</span> gender)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:starfig-2"></span>
<img src="test-book_files/figure-html/starfig-2-1.png" alt="Starwars Figure 2" width="672" />
<p class="caption">
Figure 7.2: Starwars Figure 2
</p>
</div>
<p>But note that I’ve got a problem: the Droids, which outnumber the Gungans, are now reordered to <em>after</em> the Gungans. This happens because the <span class="math inline">\(n\)</span> that we’re counting comprises subcategories of species <em>and</em> gender. Only three Gungan males exist (and no females), but that is enough to tie the Droid NA category. The Droid NA category come after the Gungan category, presumably because <em>male</em> comes before <em>NA</em>, or because NA comes last (more likely).</p>
<p>Exploring this, I see that I’m getting warning messages about the implicit NA’s in gender. Note that the following renders a slightly different plot. I <em>still</em> have not fixed the order of the species.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="dataexploration.html#cb212-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb212-2"><a href="dataexploration.html#cb212-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(species)) <span class="sc">%&gt;%</span></span>
<span id="cb212-3"><a href="dataexploration.html#cb212-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">species =</span> <span class="fu">fct_lump</span>(species, <span class="dv">5</span>), <span class="at">gender =</span> <span class="fu">fct_lump</span>(gender,</span>
<span id="cb212-4"><a href="dataexploration.html#cb212-4" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span>), <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb212-5"><a href="dataexploration.html#cb212-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">fct_explicit_na</span>(gender), <span class="at">species =</span> <span class="fu">fct_reorder</span>(species,</span>
<span id="cb212-6"><a href="dataexploration.html#cb212-6" aria-hidden="true" tabindex="-1"></a>        n)) <span class="sc">%&gt;%</span></span>
<span id="cb212-7"><a href="dataexploration.html#cb212-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(species, n, <span class="at">fill =</span> gender)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:starfig-3"></span>
<img src="test-book_files/figure-html/starfig-3-1.png" alt="Starwars Figure 3" width="672" />
<p class="caption">
Figure 7.3: Starwars Figure 3
</p>
</div>
<p>The trick here is to use <code>group_by()</code> and <code>ungroup()</code> wisely.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="dataexploration.html#cb213-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb213-2"><a href="dataexploration.html#cb213-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(species)) <span class="sc">%&gt;%</span></span>
<span id="cb213-3"><a href="dataexploration.html#cb213-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_lump</span>(species, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb213-4"><a href="dataexploration.html#cb213-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb213-5"><a href="dataexploration.html#cb213-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">typeCount =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb213-6"><a href="dataexploration.html#cb213-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb213-7"><a href="dataexploration.html#cb213-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_reorder</span>(species, typeCount)) <span class="sc">%&gt;%</span></span>
<span id="cb213-8"><a href="dataexploration.html#cb213-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(species, <span class="at">fill =</span> gender)) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:starfig-4"></span>
<img src="test-book_files/figure-html/starfig-4-1.png" alt="Starwars Figure 4" width="672" />
<p class="caption">
Figure 7.4: Starwars Figure 4
</p>
</div>
<p>As opposed to using <code>count()</code>, which progressively narrows the information available to be used, by using <code>group_by()</code>/<code>mutate()</code>/<code>ungroup()</code> with <code>geom_bar()</code> we have all of the variables still available for plotting.</p>
</div>
<div id="fct_infreq" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> fct_infreq</h2>
<p>As expected, Hadley Wickham and Garrett Grolemund solve this more simply in <strong>R4DS</strong>:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="dataexploration.html#cb214-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb214-2"><a href="dataexploration.html#cb214-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(species)) <span class="sc">%&gt;%</span></span>
<span id="cb214-3"><a href="dataexploration.html#cb214-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_lump</span>(species, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb214-4"><a href="dataexploration.html#cb214-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> species <span class="sc">%&gt;%</span></span>
<span id="cb214-5"><a href="dataexploration.html#cb214-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fct_infreq</span>() <span class="sc">%&gt;%</span></span>
<span id="cb214-6"><a href="dataexploration.html#cb214-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb214-7"><a href="dataexploration.html#cb214-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(species, <span class="at">fill =</span> gender)) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:starfig-5"></span>
<img src="test-book_files/figure-html/starfig-5-1.png" alt="Starwars Figure 5. Serial mutates are used." width="672" />
<p class="caption">
Figure 7.5: Starwars Figure 5. Serial mutates are used.
</p>
</div>
<p>Note that a single <code>mutate()</code> suffices to both lump factors, organize by frequency and reverse the order, as follows.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="dataexploration.html#cb215-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb215-2"><a href="dataexploration.html#cb215-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(species)) <span class="sc">%&gt;%</span></span>
<span id="cb215-3"><a href="dataexploration.html#cb215-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_lump</span>(species, <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb215-4"><a href="dataexploration.html#cb215-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fct_infreq</span>() <span class="sc">%&gt;%</span></span>
<span id="cb215-5"><a href="dataexploration.html#cb215-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb215-6"><a href="dataexploration.html#cb215-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(species, <span class="at">fill =</span> gender)) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:starfig-6"></span>
<img src="test-book_files/figure-html/starfig-6-1.png" alt="Starwars Figure 6. A single mutate is used." width="672" />
<p class="caption">
Figure 7.6: Starwars Figure 6. A single mutate is used.
</p>
</div>
</div>
<div id="weight-weight-dont-tell-me" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Weight weight, don’t tell me!</h2>
<p>One feature of <code>count()</code> is difficult for me to remember, mostly because it is <em>not</em> a count–it is a sum.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="dataexploration.html#cb216-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Symbol =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>), <span class="at">Value =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb216-2"><a href="dataexploration.html#cb216-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-3"><a href="dataexploration.html#cb216-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb216-4"><a href="dataexploration.html#cb216-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Symbol, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   Symbol     n
##   &lt;chr&gt;  &lt;int&gt;
## 1 c          2
## 2 a          1
## 3 b          1
## 4 d          1
## 5 e          1</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="dataexploration.html#cb218-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb218-2"><a href="dataexploration.html#cb218-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Symbol, <span class="at">wt =</span> Value, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   Symbol     n
##   &lt;chr&gt;  &lt;int&gt;
## 1 c          7
## 2 e          6
## 3 d          5
## 4 b          2
## 5 a          1</code></pre>
<p>The above example shows that <code>count()</code> performs in the usual way unless we use the <code>wt =</code> argument, which then sums the value specified and generates <code>n</code>, which now indicates a weight, not a count of a nominal variable.</p>
</div>
<div id="summarize-is-another-very-useful-function" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Summarize is another very useful function:</h2>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="dataexploration.html#cb220-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb220-2"><a href="dataexploration.html#cb220-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(species))) <span class="sc">%&gt;%</span></span>
<span id="cb220-3"><a href="dataexploration.html#cb220-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb220-4"><a href="dataexploration.html#cb220-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">mean =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb220-5"><a href="dataexploration.html#cb220-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 37 × 3
##    species      n  mean
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
##  1 Human       35  177.
##  2 Droid        6  131.
##  3 Gungan       3  209.
##  4 Kaminoan     2  221 
##  5 Mirialan     2  168 
##  6 Twi&#39;lek      2  179 
##  7 Wookiee      2  231 
##  8 Zabrak       2  173 
##  9 Aleena       1   79 
## 10 Besalisk     1  198 
## # … with 27 more rows</code></pre>
</div>
<div id="graphical-displays" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Graphical displays</h2>
<p>At the risk of biting off far more than I can chew without starting a separate chapter on my favorite data displays, I’d like to include a few plots not represented elsewhere.</p>
<div id="joyplots" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Joyplots</h3>
<p>Joyplots are a little hokey but can be visually satisfying.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="dataexploration.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span></code></pre></div>
<p>The following display is from data taken from <strong>The Cancer Genome Atlas</strong> in 2017. It combines glioblastoma with lower grade infiltrating gliomas. Since I’m only interested in diagnosis and patient age, that’s all that I’ve assembled in the <code>CSV</code>.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="dataexploration.html#cb223-1" aria-hidden="true" tabindex="-1"></a>DiffuseGlioma <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/tcga9.11.17.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 1122 Columns: 2</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): HISTOLOGY
## dbl (1): AGE</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="dataexploration.html#cb227-1" aria-hidden="true" tabindex="-1"></a>DiffuseGlioma <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(DiffuseGlioma) <span class="co">#gets rid of the NA&#39;s</span></span>
<span id="cb227-2"><a href="dataexploration.html#cb227-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-3"><a href="dataexploration.html#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(DiffuseGlioma)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   HISTOLOGY           AGE
##   &lt;chr&gt;             &lt;dbl&gt;
## 1 astrocytoma          31
## 2 astrocytoma          67
## 3 astrocytoma          44
## 4 astrocytoma          37
## 5 astrocytoma          50
## 6 oligodendroglioma    47</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="dataexploration.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DiffuseGlioma,<span class="fu">aes</span>(<span class="at">x=</span>AGE,<span class="at">y=</span>HISTOLOGY)) <span class="sc">+</span></span>
<span id="cb229-2"><a href="dataexploration.html#cb229-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">rel_min_height =</span> <span class="fl">0.01</span>) <span class="sc">+</span>  <span class="co"># removes tails</span></span>
<span id="cb229-3"><a href="dataexploration.html#cb229-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>)) <span class="sc">+</span> <span class="co"># removes cutoff top</span></span>
<span id="cb229-4"><a href="dataexploration.html#cb229-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;age (y)&quot;</span>,<span class="at">y=</span><span class="st">&quot;number&quot;</span>) <span class="sc">+</span></span>
<span id="cb229-5"><a href="dataexploration.html#cb229-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 4.16</code></pre>
<p><img src="test-book_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
</div>
</div>
<div id="relative-versus-absolute-risk" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Relative versus absolute risk</h2>
<p>Relative risk is often used in medical literature to emphasize the importance of a finding–it often makes a result sound more impressive. However, when one considers absolute risk, the effect is obviously much smaller.</p>
<p>The following is adopted from <a href="https://www.r-bloggers.com/lying-with-statistics-one-beer-a-day-will-kill-you/" class="uri">https://www.r-bloggers.com/lying-with-statistics-one-beer-a-day-will-kill-you/</a></p>
<p><strong>personograph</strong> allows for cute displays of individuals in big groups</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="dataexploration.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(personograph)</span></code></pre></div>
<p>Start with 2000 people. Some of them will have problems without alcohol exposure, about 18, in fact. The blogger choses 2000 people to start with because <span class="math inline">\(0.7*18=1\)</span></p>
<p>Note that this <strong>doesn’t</strong> stratify for any other health problems, age, socio-economic status, etc.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="dataexploration.html#cb232-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">2000</span></span>
<span id="cb232-2"><a href="dataexploration.html#cb232-2" aria-hidden="true" tabindex="-1"></a>probl_wo_alc <span class="ot">&lt;-</span> <span class="dv">18</span><span class="sc">/</span>n</span>
<span id="cb232-3"><a href="dataexploration.html#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="dataexploration.html#cb232-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first =</span> probl_wo_alc, <span class="at">second =</span> <span class="dv">1</span> <span class="sc">-</span> probl_wo_alc)</span>
<span id="cb232-5"><a href="dataexploration.html#cb232-5" aria-hidden="true" tabindex="-1"></a><span class="fu">personograph</span>(data, <span class="at">colors =</span> <span class="fu">list</span>(<span class="at">first =</span> <span class="st">&quot;black&quot;</span>, <span class="at">second =</span> <span class="st">&quot;#efefef&quot;</span>),</span>
<span id="cb232-6"><a href="dataexploration.html#cb232-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fig.title =</span> <span class="st">&quot;18 of 2000 people with health problems&quot;</span>, <span class="at">draw.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb232-7"><a href="dataexploration.html#cb232-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n.icons =</span> n, <span class="at">dimensions =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">100</span>), <span class="at">plot.width =</span> <span class="fl">0.97</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>Now we illustrate the affect of 500 mL of alcohol per day. According to the Lancet article, the relative risk of serious illness following consumption of about 25 mL ethanol (500 mL beer at 5% ABV) increases by about 7%.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="dataexploration.html#cb233-1" aria-hidden="true" tabindex="-1"></a>probl_w_alc <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>n</span>
<span id="cb233-2"><a href="dataexploration.html#cb233-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-3"><a href="dataexploration.html#cb233-3" aria-hidden="true" tabindex="-1"></a>data_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first =</span> probl_wo_alc, <span class="at">second =</span> probl_w_alc, <span class="at">third =</span> <span class="dv">1</span> <span class="sc">-</span></span>
<span id="cb233-4"><a href="dataexploration.html#cb233-4" aria-hidden="true" tabindex="-1"></a>    (probl_wo_alc <span class="sc">+</span> probl_w_alc))</span>
<span id="cb233-5"><a href="dataexploration.html#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="fu">personograph</span>(data_2, <span class="at">colors =</span> <span class="fu">list</span>(<span class="at">first =</span> <span class="st">&quot;black&quot;</span>, <span class="at">second =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb233-6"><a href="dataexploration.html#cb233-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">third =</span> <span class="st">&quot;#efefef&quot;</span>), <span class="at">fig.title =</span> <span class="st">&quot;About 1 additional case with half a litre of beer per day&quot;</span>,</span>
<span id="cb233-7"><a href="dataexploration.html#cb233-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">draw.legend =</span> <span class="cn">FALSE</span>, <span class="at">n.icons =</span> n, <span class="at">dimensions =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">100</span>),</span>
<span id="cb233-8"><a href="dataexploration.html#cb233-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.width =</span> <span class="fl">0.97</span>)</span></code></pre></div>
<p><img src="test-book_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
</div>
<div id="removing-duplicates" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Removing duplicates</h2>
<p>The following is taken from <a href="https://www.r-bloggers.com/2021/08/how-to-remove-duplicates-in-r-with-example/" class="uri">https://www.r-bloggers.com/2021/08/how-to-remove-duplicates-in-r-with-example/</a>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="dataexploration.html#cb234-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Column1 =</span> <span class="fu">c</span>(<span class="st">&quot;P1&quot;</span>, <span class="st">&quot;P1&quot;</span>, <span class="st">&quot;P2&quot;</span>, <span class="st">&quot;P3&quot;</span>, <span class="st">&quot;P1&quot;</span>,</span>
<span id="cb234-2"><a href="dataexploration.html#cb234-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;P1&quot;</span>, <span class="st">&quot;P3&quot;</span>, <span class="st">&quot;P4&quot;</span>, <span class="st">&quot;P2&quot;</span>, <span class="st">&quot;P4&quot;</span>), <span class="at">Column2 =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>,</span>
<span id="cb234-3"><a href="dataexploration.html#cb234-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">14</span>))</span>
<span id="cb234-4"><a href="dataexploration.html#cb234-4" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>##    Column1 Column2
## 1       P1       5
## 2       P1       5
## 3       P2       3
## 4       P3       5
## 5       P1       2
## 6       P1       3
## 7       P3       4
## 8       P4       7
## 9       P2      10
## 10      P4      14</code></pre>
<p>Note the duplication of rows with P1 and 5. The whole row can be removed as follows.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="dataexploration.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(data)</span></code></pre></div>
<pre><code>##   Column1 Column2
## 1      P1       5
## 2      P2       3
## 3      P3       5
## 4      P1       2
## 5      P1       3
## 6      P3       4
## 7      P4       7
## 8      P2      10
## 9      P4      14</code></pre>
<p>Reduplicated information in a column can also be removed:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="dataexploration.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(data, Column2)</span></code></pre></div>
<pre><code>##   Column2
## 1       5
## 2       3
## 3       2
## 4       4
## 5       7
## 6      10
## 7      14</code></pre>
<p>To remove duplicates from a column but to keep all the information in Column1:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="dataexploration.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(data, Column2, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##   Column1 Column2
## 1      P1       5
## 2      P2       3
## 3      P1       2
## 4      P3       4
## 5      P4       7
## 6      P2      10
## 7      P4      14</code></pre>
<p>The <strong>duplicated</strong> function can also be used.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="dataexploration.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">duplicated</span>(data)</span></code></pre></div>
<pre><code>##  [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="dataexploration.html#cb244-1" aria-hidden="true" tabindex="-1"></a>data[<span class="sc">!</span><span class="fu">duplicated</span>(data), ]</span></code></pre></div>
<pre><code>##    Column1 Column2
## 1       P1       5
## 3       P2       3
## 4       P3       5
## 5       P1       2
## 6       P1       3
## 7       P3       4
## 8       P4       7
## 9       P2      10
## 10      P4      14</code></pre>
<p>Finally, <strong>unique</strong> is also useful:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="dataexploration.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data)</span></code></pre></div>
<pre><code>##    Column1 Column2
## 1       P1       5
## 3       P2       3
## 4       P3       5
## 5       P1       2
## 6       P1       3
## 7       P3       4
## 8       P4       7
## 9       P2      10
## 10      P4      14</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="subset.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sampling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07data_explore.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["test-book.pdf", "test-book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
